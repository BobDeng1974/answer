!function(e,t){var n=e.Simple=e.Simple||{},r=[],o=0,i={},a={},u={INIT:"initialize",SUCCESS:"success"},s=!1,c=!("undefined"==typeof window||"undefined"==typeof navigator||!window.document),l=!c&&"undefined"!=typeof importScripts,p=!("undefined"==typeof module||!module.exports),f=0,d=!1;if(p&&"win32"===process.platform&&(d=!0),c){navigator.userAgent.indexOf("MSIE")>=0&&(f=parseInt(/msie\s+(\d+)/gi.exec(navigator.userAgent)[1]))}var m=function(e,t){var n=this;"string"==typeof e&&(e={name:e}),n.name=e.name,n.checkName(),n.config=e,n.callback=t,n.root=e.root,n.requires=[],n.module={id:e.name,filename:m.source(e.name),exports:{},parent:null,loaded:!1},n.loaded=!1,n.require=e.require||null,n.requireCount=e.require?e.require.length:0,n.exports={},!n.root&&n.checkDefine()||n.init()};m.prototype={init:function(){var e=this;o++,i[e.name]=e,e.root&&r.push(e),p?e.requireHandle():setTimeout(function(){e.requireHandle.call(e)},m.DELAY_TIME)},requireHandle:function(){var e,t=this;if(t.require&&t.require.length>0)for(var n=t.require,r=0,o=n.length;r<o;r++)e=m.path(t.name,n[r]),-1===t.requires.indexOf(e)&&t.requires.push(e),t.loadModuleHandle(e);else t.requireSuccess()},loadModuleHandle:function(e){var t=this,r=setTimeout(function(){throw new TypeError("timeout \u6a21\u5757\u52a0\u8f7d\u8d85\u65f6 "+m.TIMEOUT_DEFAULT/1e3+"\u79d2 "+e+"\n"+m.source(e))},m.TIMEOUT_DEFAULT),o=function(){clearTimeout(r),--t.requireCount||t.requireSuccess()};c&&!0===n.node&&!0!==s?o():t.checkDefine(e)?o():m.loader(e,o)},requireSuccess:function(){var e,t,n=0;if(!--o&&r.length)for(t=r.concat(),r=[],e=t.length;n<e;n++)t[n].success()},success:function(e){var t=this;return t.loaded||(t.loaded=!0,e&&(t.module.parent=e),t.callbackHandle(),t.exports=t.module.exports,t.module.loaded=!0),t},callbackHandle:function(){var e=this,t=function(){return m.require.apply(e,arguments)};t.async=function(t,n){return m.require.async(e.module.id,t,n)},e.callback&&e.callback(t,e.module,e.module.exports,n)},getExports:function(){return this.exports},checkName:function(){if("string"!=typeof this.name||!this.name)throw new TypeError("module \u6a21\u5757\u5fc5\u987b\u6709\u540d\u5b57")},checkDefine:function(e){return void 0!==i[e||this.name]},constructor:m},m.source=function(e,t,r){var o,i,a;if(e){if(d&&0===e.search(/^\w:\\/gi))return e.replace(/\//gi,"\\");if(-1===e.indexOf(":")||e.match(/^(http:\/\/|https:\/\/|\w:\\|\/\/)/g))return e;if(n.config&&(i=n.config,e=e.split(":"),a=(r||i.packages||[])[e[0]]||""))return a.match(/^(http:\/\/|https:\/\/|\w:\\|\/\/|\/)/g)||(a=((n.Server?n.Server.root||n.root:n.root)||"")+a),o=a+(e[1]||"")+(null===t?"":t||".js"),d&&(o=o.replace(/\//gi,"\\")),m.normalize(o)}return null},m.normalize=function(e){var t=/^((http:\/\/|https:\/\/|\w:\\|[\/]{2}[^\/]+[\/]+[^\/]+)([^\/]+\/|))?([\/])?([\s\S]*?)$/,n=function(e){var n=t.exec(e);return{device:n[1]||"",isAbsolute:!!n[4],tail:n[5]}},r=function(e,t){for(var n=[],r=0;r<e.length;r++){var o=e[r];o&&"."!==o&&(".."===o?n.length&&".."!==n[n.length-1]?n.pop():t&&n.push(".."):n.push(o))}return n};return function(e){var t=n(e),o=t.device,i=t.isAbsolute,a=t.tail,u=/[\/]$/.test(a);return a=r(a.split(/[\/\\:]+/),!i).join("/"),a||i||(a="."),a&&u&&(a+="/"),o+(i?"/":"")+a}(e)},m.path=function(e,t){return 0===t.indexOf(".")?m.normalize(e.replace(/(\/|:)[\w-]*$/gi,"/")+t).replace(/\.\//gi,"/").replace(/(^[^\/]+)\//gi,"$1:"):t},m.browser=function(e,t){var r=e,o=a[r],i=m.source(r);if(o)o.state===u.SUCCESS?t():o.callback.push(t);else{var s=document.createElement("script");s.src=i+(i.indexOf("?")>-1?"&":"?")+"v="+n.version,a[r]={state:u.INIT,callback:[t]};var c=function(){s=null;for(var e=a[r].callback,t=0,n=e.length;t<n;t++)e[t](r);a[r].callback=[],a[r].state=u.SUCCESS};"onload"in s?(s.onload=c,s.onerror=function(){throw new TypeError("file \u6587\u4ef6\u52a0\u8f7d\u5931\u8d25 "+r)}):s.attachEvent("onreadystatechange",function(){"loaded"!==s.readyState&&"complete"!==s.readyState||c()}),document.head.appendChild(s)}},m.webWorker=function(e,t){var r=m.source(e);self.importScripts(r+(r.indexOf("?")>-1?"&":"?")+"v="+n.version),t&&t()},m.nodeJS=function(e,t){0!==e.indexOf("http://")&&0!==e.indexOf("https://")&&0!==e.indexOf("//")&&require(m.path.source(e)),t()},m.require=function(e){var t,r,o,a=this;if(-1===e.indexOf(":")&&0===e.search(/\w/gi)){if(p)return require(e)}else{if(t=a.name,e=m.path(t,e),r=i[e])return r.success(a.module).getExports();if(p)return o=require(m.source(e)),r=i[e],r?r.success(a.module).getExports():o;if(l)return m.loader(e),r=i[e],r?r.success(a.module).getExports():{};if(!0!==n.node)throw new TypeError("require \u627e\u4e0d\u5230\u6a21\u5757 "+e+"\n filename: "+a.module.filename+"\n name: "+t)}return null},m.require.async=function(e,t,r){var o;return"string"==typeof t&&(t=[t]),o=(t||[]).concat(),s=!0,n.Module({name:e,require:t,root:!0},function(e){for(var t=[],n=0,i=o.length;n<i;n++)t.push(e(o[n]));r&&r.apply(r,t)})},m.loader=function(e,t){var n=".js",r=e.replace(/^.*\//gi,"");r.indexOf(".")>-1&&(n=/\.\w+$/gi.exec(r))&&(n=n[0]),c?m.loader.define.browser[n](e,t):l?m.loader.define.webWorker[n](e,t):p&&m.loader.define.node[n](e,t)},m.depend=function(e,t){var n,r=i[e];if(t||(t=[]),r){var o=r.requires;if(o.length)for(var a=0,u=o.length;a<u;a++)(n=o[a])!==e&&-1===t.indexOf(n)&&(t.push(n),m.depend(n,t))}return t},m.loader.define={browser:{".js":m.browser},webWorker:{".js":m.webWorker},node:{".js":m.nodeJS}},m.TIMEOUT_DEFAULT=6e3,m.DELAY_TIME=0,n.Module=function(e,t){return new m(e,t)},n.Module.setTimeout=function(e){m.TIMEOUT_DEFAULT=e},n.Module.loader=function(e,t,n){m.loader.define[e][t]=n},n.Module.cache=i,n.Module.path=m.path,n.Module.path.normalize=m.normalize,n.Module.path.source=m.source,n.Module.require=m.require,n.Module.depend=m.depend,n.platform={browser:c,webWorker:l,node:p,ie:f}}("undefined"!=typeof global?global:this),Simple.Module({name:"simple:application/config"},function(e,t,n,r){t.exports={comID:"data-sp",listKey:"key",domReady:"data-dom-ready"}}),Simple.Module({name:"simple:application/main",require:["./render","./server","../component/main","../component/utils"]},function(e,t,n,r){var o=e("../core/utils/main"),i=e("../component/main"),a=e("../component/utils"),u=0;t.exports=i.extend({$constructor:function(){var e,t=this;t.componentCount=0,t.staticComponent={},r.platform.browser?(t.id=u.toString(),u++):t.id="0",t.$super(),t.style=[],t.component=a.getAllComponent(t.view,t.component),t.children={},t.content="",t.contentNode=[],t._isMounted=!1,t.instantiateComponent={},t.context&&(e=t.context.send,t.context.send=function(n){n&&"object"==typeof n.content&&(n.context.style=t.style,n.context.name=t.name,n.context.template=t.template),e.apply(this,arguments)})},_set:function(e){var t=this;return e.style&&(t.style=t.style.concat(e.style)),e.children&&(t.children[e.childrenName]=e.children),t},setProps:function(e,t,n){var r=this;return r.template?(n?r.props=e:o.extend(r.props,e),r.template.render(t)):r.props=e,r},replaceProps:function(e,t){return this.setProps(e,t,!0)},server:e("./server"),constructionComponent:{},render:e("./render")}),t.exports.setName(t.id)}),Simple.Module({name:"simple:application/render",require:["./config","../core/template/main","../component/utils","../component/event"]},function(e,t,n,r){var o=e("./config").comID,i=e("../core/template/main"),a=e("../component/utils"),u=e("../component/event"),s=function(){var e,t=this,n=t.target||r.config.container;return!n&&r.platform.browser&&(n=document.body),a.createComponent.call(t,t),e=i.create({id:t.id,app:t,view:t.view,controller:t,data:{self:t},target:n}).render(),e.done(function(e){r.platform.browser?(t.template=this,t.event=u.create({itself:t.template.virtualDOM.DOM}),t._isMounted=!0,t.didMount(t.getDOMNode())):r.platform.node&&t.context&&(t.template=this,t.server(e))}),e};t.exports=function(){var e,t=this;return!1===t.node&&r.platform.node?(e="<div "+o+'="'+t.id+'" '+(t.className?'class="'+t.className+'"':"")+"></div>",t.template=e,t.server(e),t.template):t.template?t:(t._set({style:t.view.style}),a.willMount.call(t,function(){return s.call(t)}))}}),Simple.Module({name:"simple:application/server"},function(e,t,n,r){t.exports=function(e){var t=this;t.context.send({code:200,type:"html",context:{style:t.style,title:t.name,name:t.name,body:e}})}}),Simple.Module({name:"simple:component/data",require:["../core/utils/main"]},function(e,t,n,r){var o=e("../core/utils/main");t.exports={forceUpdate:function(e){var t=this;return t.template&&(t.willUpdate(t.state,t.props),t.template.render(e,function(){setTimeout(function(){t.didUpdate(t.state,t.props)},0)})),t},setProps:function(e){var t=this,n=t.props,r=e;return t.template?(t.willReceiveProps(r),!1!==t.shouldUpdate(t.state,r)?(t.willUpdate(t.state,r),t.props=r,t.template.render(!1,function(){setTimeout(function(){t.didUpdate(t.state,n)},0)})):t.props=r):t.props=r,t},setState:function(e,t,n){var r,i=this,a=i.state;return r=n?e:o.extend({},i.state,e),i.template?!1!==i.shouldUpdate(r,i.props)&&(i.willUpdate(r,i.props),i.state=r,i.template.render(t,function(){setTimeout(function(){i.didUpdate(a,i.props)},0)})):i.state=r,i},replaceState:function(e,t){return this.setState(e,t,!0)},setHTML:function(e,t){var n=this;return n.template&&!1!==n.shouldUpdate(e,n.state,n.props)&&(n.willUpdate(e,n.state,n.props),n.template.setHTML(e,t,function(){setTimeout(function(){n.didUpdate(e,n.state,n.props)},0)})),n},getProps:function(){return this.props||null},getState:function(){return this.state||null}}}),Simple.Module({name:"simple:component/event",require:["../core/object/main","../application/config","../core/event/main","./utils"]},function(e,t,n,r){var o=e("../core/object/main"),i=e("../application/config").comID,a=e("../core/event/main"),u=e("./utils"),s=",change,input,",c=",scroll,blur,focus,select,",l=["swipe","swipeLeft","swipeRight","swipeUp","swipeDown","doubleTap","tap","singleTap","longTap"],p=function(e,t){return e+"_"+t},f=function(e){return"_is_listener_"+e},d=function(e){var t;e["SimpleEvents"]=e["SimpleEvents"]||{};for(t in a)e["SimpleEvents"][t]=a[t]},m=function(e){var t,n;return e?(n={name:"",namespace:null},t=e.split("."),2===t.length?(n.name=t[0],n.namespace=t[1]):n.name=e,n):null},h=function(e){return e===window||e===document||e===document.body||e===document.documentElement},v=function(e,t,n){e.attachEvent("on"+t,function(t){t.currentTarget=e,t.target=t.srcElement,n.call(e,t)})},g=function(e,t,n){var r=e["SimpleEvents"];r._events=r._events||{},r._events[t]=r._events[t]||{},r._events[t][n.name]=r._events[t][n.name]||{},n.namespace&&(r._events[t][n.name][n.namespace]=n.namespace)},y=function(e,t){var n=!1;return l.forEach(function(e){t===e&&(n=!0)}),n&&(t="touch"),!!e["SimpleEvents"][f(t)]},x=function(e,t,n,r,o,i){var a=i-o,u=Math.abs(e-n),s=Math.abs(t-r);if(a<250&&u<10&&s<10)return"tap";if(a>=250&&u<10&&s<10)return"longTap";if(a<500)if(u>50&&s<50){if(e>n)return"swipeLeft";if(e<n)return"swipeRight"}else if(u<50&&s>50){if(t>r)return"swipeUp";if(t<r)return"swipeDown"}return null},w=function(e,t){return h(e)?e:0!==r.platform.ie&&r.platform.ie<=8&&-1!==s.indexOf(","+t+",")?e:-1!==c.indexOf(","+t+",")?e:null!==e.getAttribute(i)?e:null!==e.parentNode?w(e.parentNode):void 0},b=function(e,t){return h(e)?"_wdb_ref":0!==r.platform.ie&&r.platform.ie<=8&&-1!==s.indexOf(","+t+",")?"_ie8_ref":-1!==c.indexOf(","+t+",")?"_spec_ref":e.getAttribute("ref")},S=function(e){return h(e)?null:null!==e.getAttribute("ref")?e:null!==e.getAttribute(i)?null:S(e.parentNode)},E=function(e,t){var n,r,o,i,a,u;if(!e["SimpleEvents"]||!e["SimpleEvents"]._events)return null;n=e["SimpleEvents"],r={},o=n._events[t];for(i in o){r[i]={},a=o[i];for(u in a)r[i][u]=u}return r},T=function(e,t,n){var r,o,i=e["SimpleEvents"],a=[];if(!i._events[t]||!i._events[t][n])return a;r=i._events[t][n];for(o in r)a.push(o);return a},_=function(e,t,n,r){var o,i,a;if(t&&(a=T(e,t,n),e["SimpleEvents"].trigger(p(t,n),r),a.length>0))for(o=0,i=a.length;o<i;o++)e["SimpleEvents"].trigger(p(t,n+"."+a[o]),r)},M=function(e,t,n){return e?h(e)?[]:(t||(t=w(e),n=[]),e!==t&&(n.push(e.parentNode),M(e.parentNode,t,n)),n):[]},A=function(e,t){var n,o,i,a,u,c,l,p,f,d,m;if(!(0!==r.platform.ie&&r.platform.ie<=8&&-1!==s.indexOf(","+e+",")&&"input"===e&&"value"!==t.propertyName.toLowerCase())&&(n=t.srcElement?t.srcElement:t.target,h(t.currentTarget)&&(n=t.currentTarget),o=t.currentTarget,i=w(n,e),a=b(n,e),o===i&&(t.refTarget=S(n),t&&t.stopPropagation?(u=t.stopPropagation,t.stopPropagation=function(){u.call(this),this.target["SimpleEvents"]=this.target["SimpleEvents"]||{},this.target["SimpleEvents"]["_stop_propagation"]=!0}):(t.stopPropagation=function(){window.event.cancelBubble=!0,this.srcElement["SimpleEvents"]=this.srcElement["SimpleEvents"]||{},this.srcElement["SimpleEvents"]["_stop_propagation"]=!0},t.preventDefault=function(){window.event.returnValue=!1}),c=function(e){var t=e.srcElement?e.srcElement:e.target;return t["SimpleEvents"]=t["SimpleEvents"]||{},!0===t["SimpleEvents"]["_stop_propagation"]},l=function(e){var t=e.srcElement?e.srcElement:e.target;t&&(t["SimpleEvents"]=t["SimpleEvents"]||{},t["SimpleEvents"]["_stop_propagation"]=!1)},E(i,a)))){_(i,a,e,t),p=[];try{p=M(n)}catch(e){p=[]}for(f=0,d=p.length;f<d&&!c(t);f++)(m=b(p[f]))&&(t.refTarget=p[f],_(i,m,e,t));l(t)}},O=function(e,t,n,o){var i,a,w,b,S=m(n);h(t)?(i=t,t="_wdb_ref"):(i=this.itself,0!==r.platform.ie&&r.platform.ie<=8&&-1!==s.indexOf(","+S.name+",")&&(a=u.parseDOMref(i,{}),a[t]instanceof Array||(i=a[t],t="_ie8_ref")),-1!==c.indexOf(","+S.name+",")&&(a=u.parseDOMref(i,{}),a[t]instanceof Array||(i=a[t],t="_spec_ref"))),d(i),"on"===e?i["SimpleEvents"].on(p(t,n),o):"once"===e&&i["SimpleEvents"].once(p(t,n),o),g(i,t,S),y(i,S.name)||(w=S.name,b=!1,l.forEach(function(e){w===e&&(b=!0)}),b&&(w="touch"),i["SimpleEvents"][f(w)]=!0,"_wdb_ref"===t&&0!==r.platform.ie&&r.platform.ie<=8?v(i,n,function(e){A(S.name,e)}):b?(i.addEventListener("touchstart",function(e){var t=e.currentTarget,n=e.targetTouches[0],r=parseInt(n.pageX),o=parseInt(n.pageY),i=(new Date).getTime();t.setAttribute("data_touch_x",r),t.setAttribute("data_touch_y",o),t.setAttribute("data_touch_x_end",r),t.setAttribute("data_touch_y_end",o),t.setAttribute("data_touch_time",i),t.setAttribute("data_touches_length",e.targetTouches.length)},!1),i.addEventListener("touchmove",function(e){var t=e.targetTouches[0],n=parseInt(t.pageX),r=parseInt(t.pageY),o=e.currentTarget,i=o.getAttribute("data_touches_length");1===parseInt(i)&&(o.setAttribute("data_touch_x_end",n),o.setAttribute("data_touch_y_end",r))},!1),i.addEventListener("touchend",function(e){var t,n,r,o,i,a,u,s=e.currentTarget,c=s.getAttribute("data_touches_length");1===parseInt(c)&&(t=s.getAttribute("data_touch_x"),n=s.getAttribute("data_touch_x_end"),r=s.getAttribute("data_touch_y"),o=s.getAttribute("data_touch_y_end"),i=s.getAttribute("data_touch_time"),a=(new Date).getTime(),null!==(u=x(t,r,n,o,i,a))&&A(u,e))},!1)):i.addEventListener(S.name,function(e){A(S.name,e)},!1))},j=function(e,t){var n,r,o,i,a,u,s=w(e,t),c=b(e,t),l=E(s,c);if(l){n=m(t),r=[];for(o in l){if(!n){r.push(o);for(i in l[o])r.push(o+"."+i)}if(null!==n&&n.name===o){n.namespace||r.push(o);for(i in l[o])n.namespace||r.push(o+"."+i),null!==n.namespace&&n.namespace===i&&r.push(o+"."+i)}}for(a=0,u=r.length;a<u;a++)s["SimpleEvents"].off(p(c,r[a]))}};t.exports=o.extend({on:function(e,t,n){var r=this;t.split(" ").forEach(function(t){""!==t&&O.call(r,"on",e,t,n)})},once:function(e,t,n){var r=this;t.split(" ").forEach(function(t){""!==t&&O.call(r,"once",e,t,n)})},trigger:function(e,t){var n,r,o;if(h(e)?n=e:(r=u.parseDOMref(this.itself,{}),n=r[e]),document.createEvent)o=document.createEvent("Events"),o.initEvent(t,!0,!1),n.dispatchEvent(o);else if(document.createEventObject)try{n.fireEvent("on"+t)}catch(r){h(e)&&n["SimpleEvents"].trigger("_wdb_ref_"+t)}},off:function(e,t){var n=this;t&&""!==t.trim()||j.call(this,e,null),t.split(" ").forEach(function(t){""!==t&&j.call(n,e,t)})}})}),Simple.Module({name:"simple:component/main",require:["../core/utils/main","../core/object/main","./utils","./data","./render","./set"]},function(e,t,n,r){var o=e("../core/utils/main"),i=e("../core/object/main"),a=e("./utils"),u=e("./data"),s=e("./render"),c=e("./set"),l=a.STATUS;t.exports=i.extend({$constructor:function(){var e=this;e.$super(),e.status=l.INITIALIZE,e.componentCount=0,e.component=a.getAllComponent(e.view,e.component),e.children={},e.content="",e.contentNode=[],e._isMounted=!1,e.instantiateComponent={},r.platform.browser&&((e.app||e).staticComponent[e.id]=e)},_set:c,render:s,constructionComponent:{},forceUpdate:u.forceUpdate,setState:u.setState,replaceState:u.replaceState,setHTML:u.setHTML,action:function(e,t){var n=this;return n.app.emit(e,t),n},getDOMNode:function(){return a.parseDOMref(this.template.virtualDOM.DOM,{})},isMounted:function(){return this._isMounted},willMount:function(){},didMount:function(e){},willReceiveProps:function(e){},shouldUpdate:function(e,t){},willUpdate:function(e,t){},didUpdate:function(e,t){},willUnmount:function(){},unmount:function(){var e=this;o.each(e.children,function(e){e.unmount()}),e.parent&&delete e.parent.children[e.name],e.children={},e.template=null,e.event=null,e.status=l.INITIALIZE,e._isMounted=!1,e.willUnmount()}}),t.exports.reopenClass({STATUS:l}),t.exports.setName(t.id)}),Simple.Module({name:"simple:component/render",require:["./utils","../core/template/main","../application/config","./event"]},function(e,t,n,r){var o=e("./utils"),i=e("../core/template/main"),a=o.STATUS,u=e("../application/config").comID,s=e("./event"),c=function(e){var t,n=this;return n.status=a.RENDER,o.createComponent.call(n),t=i.create({id:n.id,view:n.view,app:n.app,controller:n,data:{self:n},target:e}).render(),t.done(function(e){r.platform.browser?(n.template=this,n.event=s.create({itself:n.template.virtualDOM.DOM}),n._isMounted=!0,n.didMount(n.getDOMNode())):n.template=e}),t};t.exports=function(e){var t=this;return!1===t.node&&r.platform.node?(t.template="<div "+u+'="'+t.id+'" '+(t.className?'class="'+t.className+'"':"")+"></div>",t.template):t.status===a.INITIALIZE?(t.app._set({style:t.view.style}),o.willMount.call(t,function(){return c.call(t,e)})):void 0}}),Simple.Module({name:"simple:component/set",require:["../core/utils/main","./data"]},function(e,t,n,r){var o=e("../core/utils/main"),i=e("./data");t.exports=function(e){var t=this,n="";return e.app&&(t.app=e.app),e.content&&(n=o.joinAll(e.content,"")),e.props?(n!==t.content&&(t.content=n,t.contentNode=e.content),i.setProps.call(t,e.props)):n&&n!==t.content&&(t.content=n,t.contentNode=e.content,i.setProps.call(t,t.props)),e.name&&(t.name=e.name),e.parent&&(t.parent=e.parent,t.parent._set({children:t,childrenName:e.name})),e.children&&(t.children[e.childrenName]=e.children),t}}),Simple.Module({name:"simple:component/utils",require:["../core/utils/main","../core/deferred/main","../core/object/main","../application/config"]},function(e,t,n,r){var o=e("../core/utils/main"),i=e("../core/deferred/main"),a=e("../core/object/main"),u=e("../application/config").comID,s={INITIALIZE:"initialize",RENDER:"render"},c=function(e){var t,n=this,r={};o.each(n.component,function(i,u){(t=r[u])instanceof a||(r[u]=i.create(o.extend({},n.constructionComponent[u]||{},{app:e||n.app,id:n.id+"."+n.componentCount++})))}),n.instantiateComponent=r},l=function(e,t,n){var r,i,a=e.getAttribute("ref");if(void 0===n)a&&(t[a]?t[a]instanceof Array?t[a].push(e):t[a]=[t[a],e]:t[a]=e);else if(e.getAttribute(u))return t;return r=e.children,o.each(r,function(e){e.getAttribute(u)||(i=e.getAttribute("ref"),i&&(t[i]?t[i]instanceof Array?t[i].push(e):t[i]=[t[i],e]:t[i]=e),l(e,t,!1))}),t},p=function(e){var t=this,n=i(),r=t.willMount(),o=!1,a=function(){o||e().then(function(){n.resolve.call(t)},n.reject)["catch"](n["throw"])};return r&&r.then?r.then(a,a)["catch"](function(e){o=!0,n["throw"](e)}):a(),n},f=function(t,n){var r=o.extend({},t.component,n||{});return o.each(t.include,function(t){o.extend(r,f(e(t)))}),r};t.exports={createComponent:c,parseDOMref:l,getAllComponent:f,willMount:p,STATUS:s}}),Simple.Module({name:"simple:router/main",require:["../core/utils/main","../core/object/main"]},function(e,t,n,r){var o=e("../core/utils/main"),i=e("../core/object/main"),a=/(\w+):\/\//,u=/\w+:\/\/([^:\/?#]+)/,s=/^([^:\/?#]+)/,c=/[^:\/?#]+:(\d+)/,l=/\w(\/[^?#]*)/,p=/(\/[^?#]*)/,f=/\.(\w+)/,d=/(\?[^#]+)/,m=/(#.+)/,h=function(e){var t,n,r,o=null,i=null,h=e.match(a),v=e.match(u);return h=h&&h[1],h||(v=e.match(s)),v=v&&v[1],t=e.match(c),t=null===t?v?null:"80":t[1],o="/"===e.charAt(0)?e.match(p):e.match(l),o=null===o?"/":o[1],o&&(i=o.match(f),i=i&&i[1]||null),r=e.replace(/#.*$/gi,"").match(d),r=r&&r[1]||null,n=e.match(m),n=n&&n[1]||null,{protocol:h,hostName:v,port:t,path:o,fileExt:i,search:r,hash:n}},v=function(e){var t,n,r,o,i=e,a=/\.[\w*]+$/gi;for(n=a.exec(e),n&&(n=n[0].substring(1)),t=e.replace(a,"").split("/"),o=0,r=t.length;o<r;o++)t[o]||(t[o]="/");return{originalPath:i,nodes:t,nodesLength:t.length,fileExt:n}},g=function(e,t){return 0!==t.indexOf("//")&&0===e.indexOf("//")&&(pathHost=/(^\/\/[^\/]*)\/|^\/\/[^$]*$/gi.exec(e),t=(pathHost[1]||pathHost[0])+t),t},y=function(e,t,n){var r,o,i,a,u,s;if(t=g(e,t),r=v(e),o=v(t),0===o.nodesLength&&"/"===o.originalPath)return 0===r.nodesLength&&"/"===r.originalPath;for(s=0;s<o.nodesLength;s++){if(i=r.nodes[s],a=o.nodes[s],u=a.charAt(0),s===o.nodesLength-1){if("*"===u&&null!==i&&void 0!==i)return!0;if(r.nodesLength>o.nodesLength)return!1}if((null===i||void 0===i)&&"["!==u)return!1;if(i!==a&&":"!==u&&"["!==u)return!1}return(null===r.fileExt||""!==r.nodes[r.nodesLength-1])&&(r.fileExt===o.fileExt||null!==r.fileExt&&"*"===o.fileExt)},x=function(e,t,n,r,o){var i,a,u,s,c,l,p,f,d={};if("function"==typeof n)return l=n.call(o,e.originalPath),!1===l?r.isSafe=!1:d=l,d;for(i=0;i<t.nodesLength;i++)if(a=e.nodes[i],u=t.nodes[i],s=u.charAt(0),":"===s&&(c=u.substring(1,u.length),d[c]=a,n[c]&&(l=n[c].call(o,a,e.originalPath),!1===l?(r.isSafe=!1,d[c]=null):d[c]=l)),"["===s&&(c=u.substring(1,u.length-1),d[c]=a||null,n[c]&&(l=n[c](a,e.originalPath),!1===l?(r.isSafe=!1,d[c]=null):d[c]=l)),"*"===s)return f=g(e.originalPath,t.originalPath),p=f.substring(0,f.length-1),e.originalPath.replace(p,"");return d},w=function(e,t,n,r,o){var i,a;return t=g(e,t),i=v(e),a=v(t),x(i,a,n,r,o)},b=function(e){var t,n,r,o,i,a,u,s,c={};if(null===e)return{};for(e=e.substring(1,e.length),t=e.split("&"),n=0,r=t.length;n<r;n++)if(o=t[n],i=o.split("="),""!==i[0]){if(a=i[0],u=i[1],c[a]||(c[a]=[]),u)try{u=decodeURIComponent(u)}catch(e){u=void 0}c[a].push(u||null)}for(s in c)1===c[s].length&&(c[s]=c[s][0]);return c},S=function(e){var t,n,r,o,i,a,u,s,c={};if(null===e)return{};for(e=e.substring(1,e.length),t=e.split("&"),o=0,i=t.length;o<i;o++)if(r=t[o],n=r.split("="),""!==n[0]){if(a=n[0],u=n[1],c[a]||(c[a]=[]),u)try{u=decodeURIComponent(u)}catch(e){u=void 0}c[a].push(u||null)}for(s in c)1===c[s].length&&(c[s]=c[s][0]);return c},E=function(e,t,n,o){var i,a,u,s,c,l,p,f,d,m,v,g,x=e.routerListening,E=h(n),T=E.path,_="//"+E.hostName+(E.port?":"+E.port:"")+T,M=E.search,A=E.hash,O=e.root||"",j=!1;O&&(i=h(O).path,"/"===i.charAt(i.length-1)&&(i=i.substring(0,i.length-1)),_=T.replace(i,"")),e.modifyUrl&&r.platform.browser&&(a=window.location.href,u=h(a),s=u.path+(u.search||"")+(u.hash||""),c=T+(M||"")+(A||""),s!==c&&("pushState"in history?history.pushState({},"",c):window.location.href=c));for(l=t,p=x.length;l<p;l++)if(g=x[l],y(_,g.pattern)){if(f={},d={isSafe:!0},v=g.customs,f.path=w(_,g.pattern,v,d,E),f.search=b(M),f.hash=S(A),!1===d.isSafe)continue;m=g.handle.call({url:n,pattern:g.pattern,customs:g.customs},f,o),j=!0;break}return j||null===e.defaultHandle||(m=e.defaultHandle(n,o)),m};t.exports=i.extend({$constructor:function(){var e=this;e.$super(),e.defaultHandle=null,e.routerListening=[]},use:function(e,t,n){var r=this,i=typeof e;"string"===i?this.routerListening.push({pattern:e,handle:t,customs:n||{}}):e instanceof Array?o.each(e,function(e){r.routerListening.push({pattern:e,handle:t,customs:n||{}})}):"function"===i&&(this.defaultHandle=e)},go:function(e,t){return E(this,0,e,t)},parse:function(e,t){var n=h(e);return t&&(n.hash=S(n.hash),n.search=b(n.search)),n}}),t.exports.setName(t.id)}),Simple.Module({name:"simple:store/main",require:["../core/utils/main","../core/object/main","./request","./paging"]},function(e,t,n,r){var o=e("../core/utils/main"),i=e("../core/object/main"),a=e("./paging"),u=e("./request");t.exports=i.extend({$constructor:function(){var e=this,t=e.pagingOptions;e.$super(),e.paging&&(e.paging=a.create({limit:t.limit,page:t.page,min:t.min})),e.before=e.before.bind(e),e.after=e.after.bind(e)},before:function(e,t){},after:function(){},cache:!1,type:"online",params:{},data:null,dataType:"JSON",jsonp:!1,dataFilter:null,ajaxOptions:{},paging:!1,context:null,pagingOptions:{map:{limit:"limit",page:"page"},limit:20,page:1,min:1},method:"GET",request:u,abort:function(){var e=this;e.isAbort=!0,e.ajax&&e.ajax.abort()}}),t.exports.reopenClass({_hosts:{client:{},server:{}},setHosts:function(e){var t=this;o.extend(t._hosts.client,e.client),o.extend(t._hosts.server,e.server)},getHosts:function(e){var t=this;return e?{client:t._hosts.client[e],server:t._hosts.server[e]}:t._hosts}}),t.exports.setName(t.id)}),Simple.Module({name:"simple:store/paging",require:["../core/object/main"]},function(e,t,n,r){var o=e("../core/object/main");t.exports=o.extend({_set:function(e){var t=this;e.total&&(t.total=e.total,t.max=parseInt((t.total+t.limit-1)/t.limit)),e.page&&(t.page=e.page),e.limit&&(t.limit=e.limit)},next:function(){return this.to(this.page+1)},prev:function(){return this.to(this.page-1)},first:function(){return this.to(this.min)},last:function(){return this.to(this.max)},to:function(e){var t=this,n=null;return void 0!==e&&(n=parseInt(e),t.page=n,void 0!==t.min&&t.page<t.min&&(t.page=t.min),void 0!==t.max&&t.page>t.max&&(t.page=t.max)),t}}),t.exports.setName(t.id)}),Simple.Module({name:"simple:store/request",require:["../core/deferred/main","../core/utils/main","../tools/ajax/main"]},function(e,t,n,r){var o=e("../core/deferred/main"),i=e("../core/utils/main"),a=function(t,n,r){var o,a=i.extend({},t.ajaxOptions,{method:t.method,cache:t.cache,dataType:t.dataType,dataParse:t.dataParse,context:t.context,progress:t.progress,dataFilter:"function"==typeof t.dataFilter?t.dataFilter.bind(t):void 0,jsonp:t.jsonp});!1===t.ajaxOptions.contentType?a.params=r:i.extend(a,{params:r}),o=i.isFunction(t.url)?t.url.call(t,r):t.url,t.ajax=e("../tools/ajax/main")(o,a).done(function(e,r,o){t.data=e,t.response=r,n.resolve(e,r,o)}).fail(function(e,r,o,i){t.response=o,n.reject(e,r,o,i)})["catch"](n["throw"])},u=function(e,t){i.isFunction(e.data)?e.data.call(e,function(n,r){n?t.reject(n.text,n.code,{text:r,statusCode:n.code,statusText:n.text},e.context):t.resolve(r,{text:r,statusCode:200,statusText:"OK",http:null},e.context)}):t.resolve(e.data,{text:e.data,statusCode:200,statusText:"OK",http:null},e.context)};t.exports=function(e){var t,n,r=this,s=o(),c=r.paging,l={},p=r.pagingOptions;if(c?(l[p.map.page]=c.page,l[p.map.limit]=c.limit,e=i.extend({},r.params,e,l)):!1!==r.ajaxOptions.contentType&&(e=i.extend({},r.params,e)),r.isAbort)s.reject("abort","\u64cd\u4f5c\u88ab\u53d6\u6d88");else if(!1!==r.before.call(r,s,e))switch(r.type){case"inline":u(r,s);break;case"online":a(r,s,e)}return t=function(t,n,o){r.data=t,r.after.call(this,!0,{data:t,response:n,context:o,params:e})},n=function(t,n,o){r.after.call(this,!1,{errorCode:t,response:n,context:o,params:e})},s.done(function(){t.apply(t,arguments)}).fail(function(){n.apply(n,arguments)}),s}}),Simple.Module({name:"simple:core/class/main"},function(e,t,n,r){var o=!!Object.__proto__,i=["create","extend","setName","reopenClass","toString"],a=function(e,t){if(e)return e.$constructor&&!t?e.$constructor:a(e.__proto__,--t)},u=function(){var e={},t=function(n){var r=this;o||(r.__proto__=n);for(var i in e)r[i]=e[i];if(e&&e.$constructor||(r.$constructor=function(){this.$super()}),e=null,r.$super=function(){var e=a(r,++r.$super._count);e&&e.apply(r,arguments),r._superCall=!0},r.$super._count=0,n&&n.$constructor||r.$super._count++,r.$constructor&&(r.$constructor.call(r),!0!==r._superCall))throw new TypeError(t.toString()+" \u5fc5\u987b\u8c03\u7528\u7236\u7ea7\u6784\u9020\u51fd\u6570 $super")};return t.create=function(t){return e=t,new this(this.prototype)},t.extend=function(e){var t,n=u(),a=this;n.prototype=Object.create(a.prototype),e&&e.mixins&&r.Utils.each(e.mixins,function(e,t){r.Utils.each(e,function(e,t){n.prototype[t]=e})}),o||(n.prototype.__proto__=n.prototype);for(t in e)"$constructor"===t?n.prototype.$constructor=e.$constructor:e.hasOwnProperty(t)&&(n.prototype[t]=e[t]);e&&e.toString&&e.hasOwnProperty("toString")&&(n.prototype.toString=e.toString);for(t in a)-1===i.indexOf(t)&&(n[t]=a[t]);return n.prototype.constructor=n,n.toString=function(){return"Simple.Class<"+n.id+">"},n},t.setName=function(e){return t.id=e.replace(/[:\/]/gi,".").replace(/\w+/gi,function(e){return e.substring(0,1).toUpperCase()+e.substring(1)}).replace(/-\w/gi,function(e){return e.substring(1,2).toUpperCase()}).replace(/\.Main$/gi,""),this},t.reopenClass=function(e){for(var t in e)this[t]=e[t];return this},t.toString=function(){return"Simple.Class"},t};t.exports=u}),Simple.Module({name:"simple:core/deferred/main",require:["../utils/main"]},function(e,t,n,r){var o=e("../utils/main"),i=0,a={PENDING:"pending",RESOLVE:"resolve",REJECT:"reject",CATCH:"catch",ALWAYS:"always"},u=function(e,t,n,r,o){var i,u;if(e.state!==a.CATCH){if(i=e._data["catch"]){if(e._catch)return e.state=a.CATCH,e._catch(i);throw i}try{if((u=t&&t.apply(n,r))&&u.then){if(u!==e)switch(u._pipe=u._pipe.concat(e._pipe.slice(o+1)),u.status){case a.RESOLVE:s(u,u,u._data.resolve[1],a.RESOLVE);break;case a.REJECT:s(u,u,u._data.reject[1],a.REJECT)}return u}return e}catch(t){if(e._data["catch"]=t,e._catch)return e.state=a.CATCH,e._catch(t);throw t}}},s=function(e,t,n,r){var o,i,s,c=e._pipe,l=c.length,p=0;for(e.status=r,e._data[r]=[t,n];p<l;p++)i=c[p][0],s=c[p][1],i!==r&&i!==a.ALWAYS||o&&o.then&&o!==e||(o=u(e,s,o||t,n,p)),c.splice(p,1),l--,p--},c=function(e){var t=this;if(t.status=a.PENDING,t.id=i++,t._data={resolve:null,reject:null,"catch":null},t._catch=null,t._pipe=[],t.resolve=function(){s(t,this,arguments,a.RESOLVE)},t.reject=function(){s(t,this,arguments,a.REJECT)},t.done=function(e){return t.then(e)},t.fail=function(e){return t.then(null,e)},t.then=function(e,n){var r=t._data;switch(t.status){case a.PENDING:e&&t._pipe.push([a.RESOLVE,e]),n&&t._pipe.push([a.REJECT,n]);break;case a.RESOLVE:return u(t,e,r.resolve[0],r.resolve[1]);case a.REJECT:return u(t,n,r.reject[0],r.reject[1])}return this},t.always=function(e){var n;return t.status===a.PENDING?t._pipe.push([a.ALWAYS,e]):(n=t._data[a.RESOLVE||a.REJECT]||[t,[]],u(t,e,n[0],n[1])),this},t["catch"]=function(e){return e===t["throw"]?{"catch":o.noop}:(t._catch||(t._catch=e),u(t),{"catch":o.noop})},t["throw"]=function(e){return t._data["catch"]||(t._data["catch"]=e),u(t),{"catch":o.noop}},t.promise=function(){return{_data:t._data,_catch:t._catch,_pipe:t._pipe,id:t.id,status:t.status,done:t.done,fail:t.fail,then:t.then,always:t.always,"catch":t["catch"],"throw":t["throw"]}},e)return u(t,e,t,[t])};t.exports=function(e){return new c(e)},t.exports.when=function(){var e=arguments,n=e.length||1,r=0,i=[],a=!0,u=!1,s=t.exports(),c=function(e,t,o){var c=null;u||(r++,i[o]=t,e||(a=!1),r===n&&(c=i.length>1?i:[i[0]],a?s.resolve.apply(s,c):s.reject.apply(s,c)))};return e.length?o.each(e,function(e,t){e&&e.then?(e.then(function(){c(!0,o.toArray(arguments),t)},function(){c(!1,o.toArray(arguments),t)}),e["catch"](function(e){u=!0,s["throw"](e)})):c("done",e,t)}):c("done",null,0),s},t.exports.all=function(e){var n=t.exports();return t.exports.when.apply(t.exports.when,e).then(function(){n.resolve.call(this,o.toArray(arguments))},function(){n.reject.call(this,o.toArray(arguments))}),n}}),Simple.Module({name:"simple:core/event/main"},function(e,t,n,r){var o=Object.hasOwnProperty,i=Array.prototype.slice,a=Array.prototype.concat.bind(Array.prototype),u=function(){},s=function(e,t){return e[0]===t||e[0].__func===t},c=function(e,t){return(e[0].__this||e[1])===t},l=function(e,t,n){var r,o,i,a,u;for(r=0,o=e.length;r<o;++r)i=e[r],a=i.length>2?i.slice(2):null,null===a?a=n:n.length>0&&a.push.apply(a,n),!1===i[0].apply(void 0===i[1]?t:i[1],a)&&a&&(u=a[0])&&u.stopPropagation&&(u.stopPropagation(),u.preventDefault())},p=function(e,t,n){var r,o,u=n[0];if(!u||"object"!=typeof u)return!1;if(n.length>2){o=i.call(n,1);for(r in u)e.apply(t,a(r,u[r],o))}else for(r in u)e.call(t,r,u[r],n[1]);return!0},f=function(e,t,n){return Object.defineProperty(e,t,{value:n,configurable:1,writable:1}),n},d=function(e,t,n){return f(e,t,Object.create(n||null))},m=function(e,t,n,r){var o=e[t];o&&(o=o.filter(function(e){return!(!n||s(e,n))||void 0!==r&&!c(e,r)}),0===o.length?(delete e[t],t in e&&(e[t]=null)):e[t]=o)};u.prototype.on=function e(t,n,r){var a,u;if(!t)throw new TypeError("Event name should be a string");if(p(e,this,arguments))return this;if(!n)throw new TypeError("Event listener should be a function");return a=this["_Concert"],a&&o.call(this,"_Concert")||(a=d(this,"_Concert",a)),u=a[t],u?o.call(a,t)||(u=a[t]=u.slice()):u=a[t]=[],u.push(i.call(arguments,1)),this},u.prototype.once=function e(t,n,r){var o,a=function(){u.prototype.off.call(this,t,n),n.apply(void 0===r?this:r,arguments)};if(!t)throw new TypeError("Event name should be a string");if(p(e,this,arguments))return this;if(!n)throw new TypeError("Event listener should be a function");return a.__func=n,a.__this=r,o=[t,a,void 0],arguments.length>3&&o.push.apply(o,i.call(arguments,3)),u.prototype.on.apply(this,o)},u.prototype.off=function e(t,n,r){var i=this["_Concert"];if(!i)return this;if(p(e,this,arguments))return this;if(n||void 0!==r)if(o.call(this,"_Concert")||(i=d(this,"_Concert",i)),t)m(i,t,n,r);else for(t in i)m(i,t,n,r);else t?i[t]&&(o.call(this,"_Concert")?delete i[t]:i=d(this,"_Concert",i),t in i&&(i[t]=null)):f(this,"_Concert",null);return this},u.prototype.trigger=function(e){var t=this["_Concert"];return t?(t[e]&&l(t[e],this,i.call(arguments,1)),t.all&&l(t.all,this,arguments),this):this},u.on=u.prototype.on,u.once=u.prototype.once,u.off=u.prototype.off,u.trigger=u.prototype.trigger,t.exports=u}),Simple.Module({name:"simple:core/message/main",require:["../event/main","../utils/main","../object/main"]},function(require,module,exports,Simple){var LISTENING_LOCALSTORAGE_NAME="Simple.Message.Listening",EventCls=require("../event/main"),Utils=require("../utils/main"),SimpleObject=require("../object/main"),Event=new EventCls,RandomKey,Object,localStorage={setItem:function(){if(window.localStorage)return window.localStorage.setItem.apply(window.localStorage,arguments)}},CreateWinName=function(){var e=Simple.root,t=location.pathname;return e?t.substring(e.length).replace(/\//gi,"_"):t.replace(/\//gi,"_")};Simple.platform.browser?(Object=SimpleObject.extend(),Object.reopenClass({on:function(e,t,n){var r=CreateWinName();Event.on(e,t,n),Event.on(e+"."+r,t,n)},off:function(e,t,n){var r=CreateWinName();Event.off(e,t,n),Event.off(e+"."+r,t,n)},once:function(e,t,n){var r=CreateWinName();Event.once(e,t,n),Event.once(e+"."+r,t,n)},emit:function(e){var t=e.split("."),n=[],r=t[1]||"*";e=t[0],RandomKey=Math.random().toString(16).substring(2),Utils.each(arguments,function(e,t){t>0&&n.push(e)}),localStorage.setItem(LISTENING_LOCALSTORAGE_NAME,JSON.stringify({event:e+("*"===r?"":"."+r.replace(/\//gi,"_")),params:n,key:RandomKey})),Event.trigger.apply(Event,[e].concat(n))}}),window.addEventListener&&window.addEventListener("storage",function(storage){try{var data=eval("("+storage.newValue+")");data&&"storage"===storage.type&&storage.key===LISTENING_LOCALSTORAGE_NAME&&RandomKey!==data.key&&Event.trigger.apply(Event,[data.event].concat(eval("("+data.params+")")))}catch(e){}},!1),module.exports=Object,module.exports.setName(module.id)):module.exports={on:Utils.noop,off:Utils.noop,once:Utils.noop,emit:Utils.noop}}),Simple.Module({name:"simple:core/object/main",require:["../class/main","../event/main"]},function(e,t,n,r){var o=e("../class/main"),i=e("../event/main"),a=new i;t.exports=o().extend({on:a.on,off:a.off,once:a.once,emit:a.trigger}),t.exports.setName(t.id)}),Simple.Module({name:"simple:core/queue/main",require:["../object/main"]},function(e,t,n,r){var o=e("../object/main"),i=function(){var e,t=this;t.max-t.current>=0&&(e=t.list.shift())&&(t.current++,t.handle(e),i.call(t))};t.exports=o.extend({$constructor:function(){var e=this;e.$super(),e.list=[],e.max=0,e.current=0,e.runCount=0,e.on("next",function(){e.current--,e.current<0&&(e.current=0),i.call(e)})},push:function(e){var t=this;return t.list.push(e),t.handle&&i.call(t),t},exec:function(e){var t=this;return t.handle=e,i.call(t),t}}),t.exports.setName(t.id)}),Simple.Module({name:"simple:core/template/main",require:["../utils/main","../deferred/main","../object/main","../../application/config","./virtual-template/main"]},function(e,t,n,r){var o=e("../utils/main"),i=e("../deferred/main"),a=e("../object/main"),u=e("../../application/config"),s=u.domReady,c=u.comID,l=e("./virtual-template/main"),p=function(e){return(e.app||e).staticComponent},f=function(e){var t=[];return o.each(e.children,function(e){e.getAttribute(c)?t.push(e):t=t.concat(f(e))}),t},d=function(t,n,r){var i=e("../../component/main").STATUS;o.each(f(n),function(e){var n=e.getAttribute(c),o=t[n];o&&o.status===i.INITIALIZE&&r(o,e)})},m=function(t,n,r){var o=n.getAttribute?n.getAttribute(c):"",i=t[o],a=e("../../component/main").STATUS;i&&o.indexOf(".")>-1&&i.status===a.INITIALIZE?r(i,n):d(t,n,r)},h=function(e,t){o.each(t,function(t){e[t]&&e[t].unmount()})},v=function(e,t){var n=i(),r=[];return m(e,t.virtualDOM.DOM,function(e,t){r.push(e.render(t))}),r.length?i.when.apply(i.when,r).then(n.resolve,n.reject)["catch"](n["throw"]):n.resolve(),n};t.exports=a.extend({render:function(e,t){var n=this,a=i(),u=p(n);return r.platform.node?n.toString().then(function(e){a.resolve.call(n,e.replace(/^(<[^>]+)>/gi,"$1 "+c+'="'+n.id+'">'))},a.reject)["catch"](a["throw"]):n.virtualDOM?n.virtualDOM.setData(n.data,e,function(e,r){o.keys(e).length>0?(h(u,r.remove),v(u,n).then(function(){t&&t(),a.resolve.call(n)},a.reject)["catch"](a["throw"])):a.resolve.call(n)}):(n.virtualDOM=l.create({id:n.id,target:n.target,view:n.toString.bind(n)}),n.virtualDOM.render().then(function(){v(u,n).then(function(){a.resolve.call(n)},a.reject)["catch"](a["throw"])},a.reject)["catch"](a["throw"])),a},toString:function(e){var t=this,n=i(),a=t.view.render(e||t.data,t.id,t.controller,t.app),u=function(e){return r.platform.node&&(e=e.replace(/^(<[^>]+)>/gi,"$1 "+s+">")),e};return o.isString(a)?n.resolve(u(a)):a.then(function(e){n.resolve(u(e))},n.reject)["catch"](n["throw"]),n},setHTML:function(e,t,n){var a=this,u=i(),s=p(a);return r.platform.browser?a.virtualDOM.setHTML(e,t,function(e,t){o.keys(e).length>0&&(h(s,t.remove),v(s,a).then(function(){n&&n(),u.resolve.call(a)},u.reject)["catch"](u["throw"]))}):u.resolve.call(a),u}}),t.exports.setName(t.id)}),Simple.Module({name:"simple:core/utils/clone",require:["./underscore"]},function(e,t,n,r){var o=e("./underscore");t.exports=function(e){return o.isArray(e)?o.extend([],e):o.isObject(e)?o.extend({},e):e}}),Simple.Module({name:"simple:core/utils/each",require:["./underscore"]},function(e,t,n,r){var o=e("./underscore"),i=Math.pow(2,53)-1,a=function(e){return function(t){return null==t?void 0:t[e]}}("length"),u=function(e){var t=a(e);return"number"==typeof t&&t>=0&&t<=i};t.exports=function(e,t,n){var r,i,a;if(t=t.bind(n),u(e))for(r=0,i=e.length;r<i&&!1!==t(e[r],r,e);r++);else for(a=o.keys(e),r=0,i=a.length;r<i&&!1!==t(e[a[r]],a[r],e);r++);return e}}),Simple.Module({name:"simple:core/utils/extend"},function(e,t,n,r){var o={extend:function(){var e,t,n,r,o,i,a=arguments[0]||{},u=1,s=arguments.length,c=!1;for("boolean"==typeof a&&(c=a,a=arguments[u]||{},u++),"object"==typeof a||this.isFunction(a)||(a={});u<s;u++)if(null!==(o=arguments[u]))for(r in o)e=a[r],n=o[r],a!==n&&(t=this.isArray(n),c&&n&&(this.isPlainObject(n)||t)?(t?(t=!1,i=e&&this.isArray(e)?e:[]):i=e&&this.isPlainObject(e)?e:{},a[r]=this.extend(c,i,n)):void 0!==n&&(a[r]=n));return a},isFunction:function(e){return"function"===this.type(e)},isArray:Array.isArray||function(e){return"array"===this.type(e)},isNumeric:function(e){return!this.isArray(e)&&e-parseFloat(e)>=0},isPlainObject:function(e){if(!e||"object"!==this.type(e))return!1;try{if(e.constructor&&!this.hasOwn.call(e,"constructor")&&!this.hasOwn.call(e.constructor.prototype,"isPrototypeOf"))return!1}catch(e){return!1}return!0},hasOwn:{}.hasOwnProperty,type:function(e){var t=Object.prototype.toString.call(e);return t.substr(8,t.length-9).toLowerCase()}};t.exports=function(){return o.extend.apply(o,arguments)}}),Simple.Module({name:"simple:core/utils/join",require:["./each"]},function(e,t,n,r){var o=e("./each"),i=function(e,t){var n="";return o(e,function(e){n+="object"==typeof e?i(e,t):t+e}),t&&(n=n.substring(t.length)),n};t.exports=i}),Simple.Module({name:"simple:core/utils/main",require:["./underscore","./clone","./extend","./split","./param","./each","./join"]},function(e,t,n,r){var o=e("./underscore");t.exports=o,o.clone=e("./clone"),o.extend=e("./extend"),o.split=e("./split"),o.decodeURIComponent=decodeURIComponent,o.encodeURIComponent=encodeURIComponent,o.parseInt=parseInt,o.parseFloat=parseFloat,o.Math=Math,o.each=o.forEach=e("./each"),o.param=e("./param"),o.joinAll=e("./join"),o.date=function(e){return new Date(e)}}),Simple.Module({name:"simple:core/utils/param",require:["./underscore"]},function(e,t,n,r){var o=e("./underscore");t.exports=function(e,t){var n,r=function(e,t,n,i){var a,u=/\[]$/;if(o.isArray(t))o.each(t,function(t,o){n||u.test(e)?i(e,t):r(e+"["+("object"==typeof t?o:"")+"]",t,n,i)});else if(n||"object"!=typeof t)i(e,t);else for(a in t)r(e+"["+a+"]",t[a],n,i)},i=[],a=function(e,t){e=encodeURIComponent(e),o.isFunction(t)?t=t():null===t&&(t=""),o.isArray(t)?(t=t[0],o.each(t.concat(),function(n){t="&"+e+"="+encodeURIComponent(n)})):t=encodeURIComponent(t),i[i.length]=e+"="+t};if(o.isArray(e))o.each(e,function(e){a(e.name,e.value)});else for(n in e)r(n,e[n],t,a);return i.join("&")}}),Simple.Module({name:"simple:core/utils/split"},function(e,t,n,r){t.exports=function(e,t,n,r){var o,i,a,u,s,c,l,p={};if(e)for(t=t||"\n",n=n||"\t",s=e.split(t),c=0,l=s.length;c<l;c++)o=s[c].split(n),i=o[0],u=decodeURIComponent(o[1]),r&&(i=i.trim()),void 0===p[i]?p[i]=u:"string"==typeof p[i]?(a=[p[i],u],p[i]=a):p[i].push(u);return p}}),Simple.Module({name:"simple:core/utils/underscore"},function(e,t,n,r){function o(e){function t(t,n,r,o,i,a){for(;i>=0&&i<a;i+=e){var u=o?o[i]:i;r=n(r,t[u],u,t)}return r}return function(n,r,o,i){r=E(r,i,4);var a=!q(n)&&S.keys(n),u=(a||n).length,s=e>0?0:u-1;return arguments.length<3&&(o=n[a?a[s]:s],s+=e),t(n,r,o,a,s,u)}}function i(e){return function(t,n,r){n=T(n,r);for(var o=j(t),i=e>0?0:o-1;i>=0&&i<o;i+=e)if(n(t[i],i,t))return i;return-1}}function a(e,t,n){return function(r,o,i){var a=0,u=j(r);if("number"==typeof i)e>0?a=i>=0?i:Math.max(i+u,a):u=i>=0?Math.min(i+1,u):i+u+1;else if(n&&i&&u)return i=n(r,o),r[i]===o?i:-1;if(o!==o)return i=t(m.call(r,a,u),S.isNaN),i>=0?i+a:-1;for(i=e>0?a:u-1;i>=0&&i<u;i+=e)if(r[i]===o)return i;return-1}}function u(e,t){var n=D.length,r=e.constructor,o=S.isFunction(r)&&r.prototype||p,i="constructor";for(S.has(e,i)&&!S.contains(t,i)&&t.push(i);n--;)(i=D[n])in e&&e[i]!==o[i]&&!S.contains(t,i)&&t.push(i)}var s={},c=s._,l=Array.prototype,p=Object.prototype,f=Function.prototype,d=l.push,m=l.slice,h=p.toString,v=p.hasOwnProperty,g=Array.isArray,y=Object.keys,x=f.bind,w=Object.create,b=function(){},S=function(e){return e instanceof S?e:this instanceof S?void(this._wrapped=e):new S(e)};S.VERSION="1.8.3";var E=function(e,t,n){if(void 0===t)return e;switch(null==n?3:n){case 1:return function(n){return e.call(t,n)};case 2:return function(n,r){return e.call(t,n,r)};case 3:return function(n,r,o){return e.call(t,n,r,o)};case 4:return function(n,r,o,i){return e.call(t,n,r,o,i)}}return function(){return e.apply(t,arguments)}},T=function(e,t,n){return null==e?S.identity:S.isFunction(e)?E(e,t,n):S.isObject(e)?S.matcher(e):S.property(e)};S.iteratee=function(e,t){return T(e,t,1/0)};var _=function(e,t){return function(n){var r=arguments.length;if(r<2||null==n)return n;for(var o=1;o<r;o++)for(var i=arguments[o],a=e(i),u=a.length,s=0;s<u;s++){var c=a[s];t&&void 0!==n[c]||(n[c]=i[c])}return n}},M=function(e){if(!S.isObject(e))return{};if(w)return w(e);b.prototype=e;var t=new b;return b.prototype=null,t},A=function(e){return function(t){return null==t?void 0:t[e]}},O=Math.pow(2,53)-1,j=A("length"),q=function(e){var t=j(e);return"number"==typeof t&&t>=0&&t<=O};S.each=S.forEach=function(e,t,n){t=E(t,n);var r,o;if(q(e))for(r=0,o=e.length;r<o;r++)t(e[r],r,e);else{var i=S.keys(e);for(r=0,o=i.length;r<o;r++)t(e[i[r]],i[r],e)}return e},S.map=S.collect=function(e,t,n){t=T(t,n);for(var r=!q(e)&&S.keys(e),o=(r||e).length,i=Array(o),a=0;a<o;a++){var u=r?r[a]:a;i[a]=t(e[u],u,e)}return i},S.reduce=S.foldl=S.inject=o(1),S.reduceRight=S.foldr=o(-1),S.find=S.detect=function(e,t,n){var r;if(void 0!==(r=q(e)?S.findIndex(e,t,n):S.findKey(e,t,n))&&-1!==r)return e[r]},S.filter=S.select=function(e,t,n){var r=[];return t=T(t,n),S.each(e,function(e,n,o){t(e,n,o)&&r.push(e)}),r},S.reject=function(e,t,n){return S.filter(e,S.negate(T(t)),n)},S.every=S.all=function(e,t,n){t=T(t,n);for(var r=!q(e)&&S.keys(e),o=(r||e).length,i=0;i<o;i++){var a=r?r[i]:i;if(!t(e[a],a,e))return!1}return!0},S.some=S.any=function(e,t,n){t=T(t,n);for(var r=!q(e)&&S.keys(e),o=(r||e).length,i=0;i<o;i++){var a=r?r[i]:i;if(t(e[a],a,e))return!0}return!1},S.contains=S.includes=S.include=function(e,t,n,r){return q(e)||(e=S.values(e)),("number"!=typeof n||r)&&(n=0),S.indexOf(e,t,n)>=0},S.invoke=function(e,t){var n=m.call(arguments,2),r=S.isFunction(t);return S.map(e,function(e){var o=r?t:e[t];return null==o?o:o.apply(e,n)})},S.pluck=function(e,t){return S.map(e,S.property(t))},S.where=function(e,t){return S.filter(e,S.matcher(t))},S.findWhere=function(e,t){return S.find(e,S.matcher(t))},S.max=function(e,t,n){var r,o,i=-1/0,a=-1/0;if(null==t&&null!=e){e=q(e)?e:S.values(e);for(var u=0,s=e.length;u<s;u++)(r=e[u])>i&&(i=r)}else t=T(t,n),S.each(e,function(e,n,r){((o=t(e,n,r))>a||o===-1/0&&i===-1/0)&&(i=e,a=o)});return i},S.min=function(e,t,n){var r,o,i=1/0,a=1/0;if(null==t&&null!=e){e=q(e)?e:S.values(e);for(var u=0,s=e.length;u<s;u++)(r=e[u])<i&&(i=r)}else t=T(t,n),S.each(e,function(e,n,r){((o=t(e,n,r))<a||o===1/0&&i===1/0)&&(i=e,a=o)});return i},S.shuffle=function(e){for(var t,n=q(e)?e:S.values(e),r=n.length,o=Array(r),i=0;i<r;i++)t=S.random(0,i),t!==i&&(o[i]=o[t]),o[t]=n[i];return o},S.sample=function(e,t,n){return null==t||n?(q(e)||(e=S.values(e)),e[S.random(e.length-1)]):S.shuffle(e).slice(0,Math.max(0,t))},S.sortBy=function(e,t,n){return t=T(t,n),S.pluck(S.map(e,function(e,n,r){return{value:e,index:n,criteria:t(e,n,r)}}).sort(function(e,t){var n=e.criteria,r=t.criteria;if(n!==r){if(n>r||void 0===n)return 1;if(n<r||void 0===r)return-1}return e.index-t.index}),"value")};var C=function(e){return function(t,n,r){var o={};return n=T(n,r),S.each(t,function(r,i){var a=n(r,i,t);e(o,r,a)}),o}};S.groupBy=C(function(e,t,n){S.has(e,n)?e[n].push(t):e[n]=[t]}),S.indexBy=C(function(e,t,n){e[n]=t}),S.countBy=C(function(e,t,n){S.has(e,n)?e[n]++:e[n]=1}),S.toArray=function(e){return e?S.isArray(e)?m.call(e):q(e)?S.map(e,S.identity):S.values(e):[]},S.size=function(e){return null==e?0:q(e)?e.length:S.keys(e).length},S.partition=function(e,t,n){t=T(t,n);var r=[],o=[];return S.each(e,function(e,n,i){(t(e,n,i)?r:o).push(e)}),[r,o]},S.first=S.head=S.take=function(e,t,n){if(null!=e)return null==t||n?e[0]:S.initial(e,e.length-t)},S.initial=function(e,t,n){return m.call(e,0,Math.max(0,e.length-(null==t||n?1:t)))},S.last=function(e,t,n){if(null!=e)return null==t||n?e[e.length-1]:S.rest(e,Math.max(0,e.length-t))},S.rest=S.tail=S.drop=function(e,t,n){return m.call(e,null==t||n?1:t)},S.compact=function(e){return S.filter(e,S.identity)};var N=function(e,t,n,r){for(var o=[],i=0,a=r||0,u=j(e);a<u;a++){var s=e[a];if(q(s)&&(S.isArray(s)||S.isArguments(s))){t||(s=N(s,t,n));var c=0,l=s.length;for(o.length+=l;c<l;)o[i++]=s[c++]}else n||(o[i++]=s)}return o};S.flatten=function(e,t){return N(e,t,!1)},S.without=function(e){return S.difference(e,m.call(arguments,1))},S.uniq=S.unique=function(e,t,n,r){S.isBoolean(t)||(r=n,n=t,t=!1),null!=n&&(n=T(n,r));for(var o=[],i=[],a=0,u=j(e);a<u;a++){var s=e[a],c=n?n(s,a,e):s;t?(a&&i===c||o.push(s),i=c):n?S.contains(i,c)||(i.push(c),o.push(s)):S.contains(o,s)||o.push(s)}return o},S.union=function(){return S.uniq(N(arguments,!0,!0))},S.intersection=function(e){for(var t=[],n=arguments.length,r=0,o=j(e);r<o;r++){var i=e[r];if(!S.contains(t,i)){for(var a=1;a<n&&S.contains(arguments[a],i);a++);a===n&&t.push(i)}}return t},S.difference=function(e){var t=N(arguments,!0,!0,1);return S.filter(e,function(e){return!S.contains(t,e)})},S.zip=function(){return S.unzip(arguments)},S.unzip=function(e){for(var t=e&&S.max(e,j).length||0,n=Array(t),r=0;r<t;r++)n[r]=S.pluck(e,r);return n},S.object=function(e,t){for(var n={},r=0,o=j(e);r<o;r++)t?n[e[r]]=t[r]:n[e[r][0]]=e[r][1];return n},S.findIndex=i(1),S.findLastIndex=i(-1),S.sortedIndex=function(e,t,n,r){n=T(n,r,1);for(var o=n(t),i=0,a=j(e);i<a;){var u=Math.floor((i+a)/2);n(e[u])<o?i=u+1:a=u}return i},S.indexOf=a(1,S.findIndex,S.sortedIndex),S.lastIndexOf=a(-1,S.findLastIndex),S.range=function(e,t,n){null==t&&(t=e||0,e=0),n=n||1;for(var r=Math.max(Math.ceil((t-e)/n),0),o=Array(r),i=0;i<r;i++,e+=n)o[i]=e;return o};var k=function(e,t,n,r,o){if(!(r instanceof t))return e.apply(n,o);var i=M(e.prototype),a=e.apply(i,o);return S.isObject(a)?a:i};S.bind=function(e,t){if(x&&e.bind===x)return x.apply(e,m.call(arguments,1));if(!S.isFunction(e))throw new TypeError("Bind must be called on a function");var n=m.call(arguments,2),r=function(){return k(e,r,t,this,n.concat(m.call(arguments)))};return r},S.partial=function(e){var t=m.call(arguments,1),n=function(){for(var r=0,o=t.length,i=Array(o),a=0;a<o;a++)i[a]=t[a]===S?arguments[r++]:t[a];for(;r<arguments.length;)i.push(arguments[r++]);return k(e,n,this,this,i)};return n},S.bindAll=function(e){var t,n,r=arguments.length;if(r<=1)throw new Error("bindAll must be passed function names");for(t=1;t<r;t++)n=arguments[t],e[n]=S.bind(e[n],e);return e},S.memoize=function(e,t){var n=function(r){var o=n.cache,i=""+(t?t.apply(this,arguments):r);return S.has(o,i)||(o[i]=e.apply(this,arguments)),o[i]};return n.cache={},n},S.delay=function(e,t){var n=m.call(arguments,2);return setTimeout(function(){return e.apply(null,n)},t)},S.defer=S.partial(S.delay,S,1),S.throttle=function(e,t,n){var r,o,i,a=null,u=0;n||(n={});var s=function(){u=!1===n.leading?0:S.now(),a=null,i=e.apply(r,o),a||(r=o=null)};return function(){var c=S.now();u||!1!==n.leading||(u=c);var l=t-(c-u);return r=this,o=arguments,l<=0||l>t?(a&&(clearTimeout(a),a=null),u=c,i=e.apply(r,o),a||(r=o=null)):a||!1===n.trailing||(a=setTimeout(s,l)),i}},S.debounce=function(e,t,n){var r,o,i,a,u,s=function(){var c=S.now()-a;c<t&&c>=0?r=setTimeout(s,t-c):(r=null,n||(u=e.apply(i,o),r||(i=o=null)))};return function(){i=this,o=arguments,a=S.now();var c=n&&!r;return r||(r=setTimeout(s,t)),c&&(u=e.apply(i,o),i=o=null),u}},S.wrap=function(e,t){return S.partial(t,e)},S.negate=function(e){return function(){return!e.apply(this,arguments)}},S.compose=function(){var e=arguments,t=e.length-1;return function(){for(var n=t,r=e[t].apply(this,arguments);n--;)r=e[n].call(this,r);return r}},S.after=function(e,t){return function(){if(--e<1)return t.apply(this,arguments)}},S.before=function(e,t){var n;return function(){return--e>0&&(n=t.apply(this,arguments)),e<=1&&(t=null),n}},S.once=S.partial(S.before,2);var I=!{toString:null}.propertyIsEnumerable("toString"),D=["valueOf","isPrototypeOf","toString","propertyIsEnumerable","hasOwnProperty","toLocaleString"];S.keys=function(e){if(!S.isObject(e))return[];if(y)return y(e);var t=[];for(var n in e)S.has(e,n)&&t.push(n);return I&&u(e,t),t},S.allKeys=function(e){if(!S.isObject(e))return[];var t=[];for(var n in e)t.push(n);return I&&u(e,t),t},S.values=function(e){for(var t=S.keys(e),n=t.length,r=Array(n),o=0;o<n;o++)r[o]=e[t[o]];return r},S.mapObject=function(e,t,n){t=T(t,n);for(var r,o=S.keys(e),i=o.length,a={},u=0;u<i;u++)r=o[u],a[r]=t(e[r],r,e);return a},S.pairs=function(e){for(var t=S.keys(e),n=t.length,r=Array(n),o=0;o<n;o++)r[o]=[t[o],e[t[o]]];return r},S.invert=function(e){for(var t={},n=S.keys(e),r=0,o=n.length;r<o;r++)t[e[n[r]]]=n[r];return t},S.functions=S.methods=function(e){var t=[];for(var n in e)S.isFunction(e[n])&&t.push(n);return t.sort()},S.extend=_(S.allKeys),S.extendOwn=S.assign=_(S.keys),S.findKey=function(e,t,n){t=T(t,n);for(var r,o=S.keys(e),i=0,a=o.length;i<a;i++)if(r=o[i],t(e[r],r,e))return r},S.pick=function(e,t,n){var r,o,i={},a=e;if(null==a)return i;S.isFunction(t)?(o=S.allKeys(a),r=E(t,n)):(o=N(arguments,!1,!1,1),r=function(e,t,n){return t in n},a=Object(a));for(var u=0,s=o.length;u<s;u++){var c=o[u],l=a[c];r(l,c,a)&&(i[c]=l)}return i},S.omit=function(e,t,n){if(S.isFunction(t))t=S.negate(t);else{var r=S.map(N(arguments,!1,!1,1),String);t=function(e,t){return!S.contains(r,t)}}return S.pick(e,t,n)},S.defaults=_(S.allKeys,!0),S.create=function(e,t){var n=M(e);return t&&S.extendOwn(n,t),n},S.clone=function(e){return S.isObject(e)?S.isArray(e)?e.slice():S.extend({},e):e},S.tap=function(e,t){return t(e),e},S.isMatch=function(e,t){var n=S.keys(t),r=n.length;if(null==e)return!r;for(var o=Object(e),i=0;i<r;i++){var a=n[i];if(t[a]!==o[a]||!(a in o))return!1}return!0};var R=function(e,t,n,r){if(e===t)return 0!==e||1/e==1/t;if(null==e||null==t)return e===t;e instanceof S&&(e=e._wrapped),t instanceof S&&(t=t._wrapped);var o=h.call(e);if(o!==h.call(t))return!1;switch(o){case"[object RegExp]":case"[object String]":return""+e==""+t;case"[object Number]":return+e!=+e?+t!=+t:0==+e?1/+e==1/t:+e==+t;case"[object Date]":case"[object Boolean]":return+e==+t}var i="[object Array]"===o;if(!i){if("object"!=typeof e||"object"!=typeof t)return!1;var a=e.constructor,u=t.constructor;if(a!==u&&!(S.isFunction(a)&&a instanceof a&&S.isFunction(u)&&u instanceof u)&&"constructor"in e&&"constructor"in t)return!1}n=n||[],r=r||[];for(var s=n.length;s--;)if(n[s]===e)return r[s]===t;if(n.push(e),r.push(t),i){if((s=e.length)!==t.length)return!1;for(;s--;)if(!R(e[s],t[s],n,r))return!1}else{var c,l=S.keys(e);if(s=l.length,S.keys(t).length!==s)return!1;for(;s--;)if(c=l[s],!S.has(t,c)||!R(e[c],t[c],n,r))return!1}return n.pop(),r.pop(),!0};S.isEqual=function(e,t){return R(e,t)},S.isEmpty=function(e){return null==e||(q(e)&&(S.isArray(e)||S.isString(e)||S.isArguments(e))?0===e.length:0===S.keys(e).length)},S.isElement=function(e){return!(!e||1!==e.nodeType)},S.isArray=g||function(e){return"[object Array]"===h.call(e)},S.isObject=function(e){var t=typeof e;return"function"===t||"object"===t&&!!e},S.each(["Arguments","Function","String","Number","Date","RegExp","Error"],function(e){S["is"+e]=function(t){return h.call(t)==="[object "+e+"]"}}),S.isArguments(arguments)||(S.isArguments=function(e){return S.has(e,"callee")}),"function"!=typeof/./&&"object"!=typeof Int8Array&&(S.isFunction=function(e){return"function"==typeof e||!1}),S.isFinite=function(e){return isFinite(e)&&!isNaN(parseFloat(e))},S.isNaN=function(e){return S.isNumber(e)&&e!==+e},S.isBoolean=function(e){return!0===e||!1===e||"[object Boolean]"===h.call(e)},S.isNull=function(e){return null===e},S.isUndefined=function(e){return void 0===e},S.has=function(e,t){return null!=e&&v.call(e,t)},S.noConflict=function(){return s._=c,this},S.identity=function(e){return e},S.constant=function(e){return function(){return e}},S.noop=function(){},S.property=A,S.propertyOf=function(e){return null==e?function(){}:function(t){return e[t]}},S.matcher=S.matches=function(e){return e=S.extendOwn({},e),function(t){return S.isMatch(t,e)}},S.times=function(e,t,n){var r=Array(Math.max(0,e));t=E(t,n,1);for(var o=0;o<e;o++)r[o]=t(o);return r},S.random=function(e,t){return null==t&&(t=e,e=0),e+Math.floor(Math.random()*(t-e+1))},S.now=Date.now||function(){return(new Date).getTime()};var L={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},U=S.invert(L),H=function(e){var t=function(t){return e[t]},n="(?:"+S.keys(e).join("|")+")",r=RegExp(n),o=RegExp(n,"g");return function(e){return e=null==e?"":""+e,r.test(e)?e.replace(o,t):e}};S.escape=H(L),S.unescape=H(U),S.result=function(e,t,n){var r=null==e?void 0:e[t];return void 0===r&&(r=n),S.isFunction(r)?r.call(e):r};var P=0;S.uniqueId=function(e){var t=++P+"";return e?e+t:t},S.chain=function(e){var t=S(e);return t._chain=!0,t};var $=function(e,t){return e._chain?S(t).chain():t};S.mixin=function(e){S.each(S.functions(e),function(t){var n=S[t]=e[t];S.prototype[t]=function(){var e=[this._wrapped];return d.apply(e,arguments),$(this,n.apply(S,e))}})},S.mixin(S),S.each(["pop","push","reverse","shift","sort","splice","unshift"],function(e){var t=l[e];S.prototype[e]=function(){var n=this._wrapped;return t.apply(n,arguments),"shift"!==e&&"splice"!==e||0!==n.length||delete n[0],$(this,n)}}),S.each(["concat","join","slice"],function(e){var t=l[e];S.prototype[e]=function(){return $(this,t.apply(this._wrapped,arguments))}}),S.prototype.value=function(){return this._wrapped},S.prototype.valueOf=S.prototype.toJSON=S.prototype.value,S.prototype.toString=function(){return""+this._wrapped},t.exports=S}),Simple.Module({name:"simple:core/view/core",require:["../../application/config","../deferred/main","../utils/main"]},function(e,t,n,r){var o=e("../../application/config").comID,i=e("../deferred/main"),a=e("../utils/main"),u={"<":"&#60;",">":"&#62;",'"':"&#34;","'":"&#39;","&":"&#38;"},s=function(e){return u[e]},c=function(e,t){return"string"!=typeof e&&(t=typeof e,"number"===t?e+="":e="function"===t?c(e.call(e)):""),e},l=function(e){return c(e).replace(/&(?![\w#]+;)|[<>"']/g,s)},p=function(e){for(var t,n,r=[],o=[],a=0,u=e.length,s=i,c=s();a<u;a++)(t=e[a])&&t.then&&(r.push(t),o.push(a));return n=r.length,n?s.when.apply(s,r).then(function(){for(var t=arguments,n=o.length,r=0;r<n;r++)e[o[r]]="string"==typeof t[r]?t[r]:t[r][0];c.resolve(e)},c.reject)["catch"](c["throw"]):c.resolve(e),c},f=function(e,t,n){var a,u,s,c,l,f,d,m,h=i,v=h();return e=[].slice.apply(e),a=e[0],u=e.slice(1),s=u.shift(),c=u.pop(),l=t.instantiateComponent[c],d=t.instantiateComponent[a],"v2"===n&&(u=u[0]||[]),l||(l=t),d?(f=function(){d._set({props:s,content:u,parent:l,name:a}),r.platform.node?(m=d.render(),m.then?m.then(function(){v.resolve(this.template)},v.reject)["catch"](v["throw"]):v.resolve(m)):v.resolve("<div "+o+'="'+d.id+'"></div>')},u.length?p(u).then(function(e){u=e,f()},v.reject)["catch"](v["throw"]):f()):v["throw"](new Error("component render error name: "+a)),v},d=function(e){var t=i();return p(e).then(function(e){t.resolve(a.joinAll(e,""))},t.reject)["catch"](t["throw"]),t},m={utils:a,Utils:a,console:console,Simple:r};t.exports={$helpers:m,$string:c,$escape:l,$resolve:d,$component:f,$each:a.each,$escape:a.escape}}),Simple.Module({name:"simple:core/view/main",require:["./core","../utils/main","../object/main"]},function(e,t,n,r){var o={},i=e("../utils/main"),a=e("../object/main"),u=null,s=e("./core");if(r.platform.browser){var c=document.head.getElementsByTagName("link"),l=document.body.getElementsByTagName("link");i.each(c,function(e){o[e.href]=!0}),i.each(l,function(e){o[e.href]=!0}),u=document.createElement("a")}var p=function(e,t){var n=[];return!1===r.develop?n:(r.platform.browser?i.each(t,function(t){var i,a=r.Module.path(e,t),s=r.Module.path.source(a,".css");u.href=s,s=u.href,s+=s.indexOf("?")>-1?"&":"?v="+(r.version||"1.0.0"),o[s]||(n.push(s),i=document.createElement("link"),i.href=s,i.rel="stylesheet",i.type="text/css",document.head.appendChild(i),o[s]=!0)}):i.each(t,function(t){n.push(r.Module.path(e,t))}),n)};t.exports=a.extend({$constructor:function(){var e=this;e.$super(),e.style=p(e.id,e.style),"string"==typeof e.template?e.template=function(e){return function(){return e}}(e.template):e.template=e.template.bind(s)},render:function(e,t,n,r){return this.template(e,t,n,r)}}),t.exports.reopenClass({helpers:s.$helpers}),t.exports.setName(t.id)}),Simple.Module({name:"simple:tools/ajax/main",require:["../../core/utils/main","./methods/request","./methods/get","./methods/post","./methods/html","./methods/request/options"]},function(e,t,n,r){var o=e("../../core/utils/main"),i=e("./methods/request/options");t.exports=e("./methods/request"),t.exports.get=e("./methods/get"),t.exports.post=e("./methods/post"),t.exports.html=e("./methods/html"),t.exports.setting=function(e){o.extend(i,e)},t.exports.setToken=function(e,t){i.token={key:t||"authToken",value:e||""}},t.exports._nodeData={},t.exports.getData=function(e){var n=t.exports._nodeData[e];return n?(delete t.exports._nodeData[e],n):null}}),Simple.Module({name:"simple:tools/cookie/main",require:["./core/main"]},function(e,t,n,r){var o,i=e("./core/main");o=r.platform.node?r.Server.Tools.cookie:i,t.exports={getData:function(e,t){return o.getCookie(e,t)},setData:function(e,t,n,r){o.setCookie(e,t,n||{},r)},remove:function(e,t,n){o.removeCookie(e,t||{},n)}}}),Simple.Module({name:"simple:tools/logger/main"},function(e,t,n,r){var o={log:[],error:[],request:[]},i={log:function(e){e&&(o.log.push(e),!0===r.develop&&window.console&&console.log(e))},error:function(e){e&&(o.error.push(e),!0===r.develop&&window.console&&console.error(e))},request:function(e){var t;e&&(t="["+e.time+"] "+e.responseURL,o.request.push(t),!0===r.develop&&window.console&&console.log(t))}};r.platform.node?t.exports=r.Server.Tools.logger||{}:t.exports=i,t.exports.list=o}),Simple.Module({name:"simple:core/template/virtual-dom/main",require:["./diff/main","./patch/main"]},function(e,t,n){t.exports={diff:e("./diff/main"),patch:e("./patch/main")}}),Simple.Module({name:"simple:core/template/virtual-template/dom",require:["../../deferred/main"]},function(e,t,n,r){var o=e("../../deferred/main"),i=function(e,t){var n,o,i;o=document.createElement("div"),o.innerHTML=e,r.platform.ie&&r.platform.ie<8&&(o.style.cssText="position:absolute;left:-999999px;top:-999999px;visibility:hidden;",document.body.appendChild(o)),n=1===o.childNodes.length?o.childNodes[0].cloneNode(!0):o,i=n,r.platform.ie&&r.platform.ie<8&&(1!==o.childNodes.length&&(n.style.cssText=""),document.body.removeChild(o)),t.resolve(i)};t.exports=function(e){var t=o();return e&&e.done?e.then(function(e){i(e,t)},t.reject)["catch"](t["throw"]):i(e,t),t}}),Simple.Module({name:"simple:core/template/virtual-template/main",require:["./dom","./utils","../virtual-dom/main","../../deferred/main","../../object/main","../../../application/config"]},function(e,t,n,r){var o=e("../../deferred/main"),i=e("../../object/main"),a=e("../virtual-dom/main"),u=e("./utils"),s=e("./dom"),c=a.diff,l=a.patch,p=e("../../../application/config"),f=p.domReady,d=p.comID,m=function(e,t,n){var r,o,i;if(t.getAttribute(e)===n)return t;for(r=t.children,o=0,i=r.length;o<i;o++)if(r[o].getAttribute(e)===n)return r[o];return null},h=function(e,t){return"simple-component"===e.tagName.toLowerCase()?null:m(d,e,t)},v=function(e,t){t&&e.setAttribute&&!e.getAttribute(d)&&e.setAttribute(d,t)},g=function(e,t){return s(e.view(t))};t.exports=i.extend({render:function(){var e,t=this,n=o();return t.isDirty=!1,t.flushCallbacks=[],t.target&&(e=h(t.target,t.id))?(t.DOM=e,t.flush().then(function(){n.resolve.call(t)},n.reject)["catch"](n["throw"]),n):(g(t).then(function(e){t.DOM=e,v(t.DOM,t.id),-1===t.DOM.getAttribute(d).indexOf(".")?(t.target&&t.target.appendChild(t.DOM),n.resolve.call(t)):n["throw"](new Error("render error <Simple.Application> \u5fc5\u987b\u6709\u4e00\u4e2a\u5bb9\u5668"))},n.reject)["catch"](n["throw"]),n)},flush:function(e,t){var n,r,i,a,u,p=this,d=o(),m=function(){if(p.isDirty=!1,t&&t(n,r),i=p.flushCallbacks,a=i.length)for(u=0;u<a;u++)i[u]&&i[u](),i[u]=null;p.flushCallbacks=[],d.resolve()},h=function(e){v(e,p.id),n=c(p.DOM,e),r=l(p.DOM,n),r.newNode&&(p.DOM=r.newNode,r.newNode=null,r.oldNode=null),m()};return null===p.DOM.getAttribute(f)?"string"==typeof e?s(e).then(h,d.reject)["catch"](d["throw"]):g(p,e).then(h,d.reject)["catch"](d["throw"]):(p.DOM.removeAttribute(f),"string"!=typeof e&&p.view(e),m()),d},setData:function(e,t,n){var r=this,i=o();return"boolean"==typeof t&&t?r.flush(e,n).then(i.resolve,i.reject)["catch"](i["throw"]):r.isDirty||(r.isDirty=!0,u.nextTick(function(){r.flush(e,n).then(i.resolve,i.reject)["catch"](i["throw"])})),"function"==typeof t&&r.flushCallbacks.push(t),i},setHTML:function(e,t,n){return this.setData(e,t,n)}})}),Simple.Module({name:"simple:core/template/virtual-template/utils",require:["../main"]},function(e,t,n,r){var o,i={};r.platform.browser&&(o=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame,i.requestAnimationFrame=function(e){return o(e)},i.nextTick=o?function(e){i.requestAnimationFrame(e)}:function(e){setTimeout(e,16)}),t.exports=i}),Simple.Module({name:"simple:tools/ajax/http/main",require:["./client/main","./request/script-jsonp-request","./request/x-domain-request","./request/xml-http-request","./request/node-cache-request"]},function(e,t,n,r){var o=e("./client/main"),i=e("./request/script-jsonp-request"),a=e("./request/x-domain-request"),u=e("./request/xml-http-request"),s=e("./request/node-cache-request"),c=r.platform.ie;t.exports=function(e){r.platform.node?(e.xhr=s,e.jsonp=!1):r.platform.browser&&e.jsonp?e.xhr=i:e.crossDomain?e.xhr=c?c<8?i:c>9?u:a:u:e.xhr=u,o(e)}}),Simple.Module({name:"simple:tools/ajax/methods/get",require:["./request"]},function(e,t,n,r){var o=e("./request");t.exports=function(e,t,n,r){return o(e,{method:"GET",params:t||{},dataType:n||"JSON",context:r||null})}}),Simple.Module({name:"simple:tools/ajax/methods/html",require:["./request"]},function(e,t,n,r){var o=e("./request");t.exports=function(e,t,n,r){return o(e,{method:n||"GET",params:t,dataType:"HTML",context:r||null})}}),Simple.Module({name:"simple:tools/ajax/methods/post",require:["./request"]},function(e,t,n,r){var o=e("./request");t.exports=function(e,t,n,r){return o(e,{method:"POST",params:t||{},dataType:n||"JSON",context:r||null})}}),Simple.Module({name:"simple:tools/ajax/methods/request",require:["../../../core/deferred/main","../../../core/utils/main","../http/main","./request/options","./request/url","./request/response"]},function(e,t,n,r){var o,i=e("../../../core/deferred/main"),a=e("../../../core/utils/main"),u=e("../http/main"),s=e("./request/options"),c=e("./request/url"),l=e("./request/response"),p=r.platform.ie&&6===r.platform.ie;t.exports=function(t,n){var r,f=i(),d=new Date,m=a.clone(n);return o||(o=e("../main")),m=a.extend(!0,{},s,m),m.url=t,m.method=m.method.toUpperCase(),m.dataType=m.dataType.toUpperCase(),c(m),p&&m.xhrFields&&delete m.xhrFields.withCredentials,m.callback=function(e,t){t.beginTime=d;try{l(f,m,e,t)}catch(e){f["throw"](e)}},r=o.getData(m.clientUrl),r?setTimeout(function(){"string"!=typeof r&&(r=JSON.stringify(r)),m.callback(!0,{status:"200",statusText:"OK",text:r,isNodeData:!0,responseURL:m.url})}):(m.token&&(m.url+=(m.url.indexOf("?")>-1?"&":"?")+m.token.key+"="+encodeURIComponent(m.token.value)),m.cache||(m.url+=(m.url.indexOf("?")>-1?"&":"?")+"_="+Math.random()),u(m)),f}}),Simple.Module({name:"simple:tools/cookie/core/main",require:["../../../core/utils/main"]},function(e,t,n,r){var o=e("../../../core/utils/main"),i=function(e){return o.split(document.cookie,";","=",!0)[e]||""},a=function(e,t,n){var r,o=[],i=n.expires,a=n.path,u=n.domain,s=n.secure;i&&(r=new Date(Date.now()+i),o.push("expires="+r.toGMTString())),a&&o.push("path="+a),u&&o.push("domain="+u),s&&o.push("secure"),o=o.join(";"),document.cookie=e+"="+encodeURIComponent(t)+(o?";"+o:"")},u=function(e,t){t||(t={}),t.expires=new Date(Date.now()-1e4).toGMTString(),a(e,"",t)};t.exports={getCookie:i,setCookie:a,removeCookie:u}}),Simple.Module({name:"simple:core/template/virtual-dom/diff/list",require:["../utils/main","../patch/main"]},function(e,t,n){var r=e("../utils/main"),o=e("../patch/main"),i=function(e){var t,n,o,i,a={},u=[];for(t=0,n=e.length;t<n;t++)o=e[t],i=r.getItemSign(o),i?a[i]=t:u.push(o);return{keyIndex:a,free:u}},a=function(e,t){for(var n,a,u,s,c,l,p,f,d,m,h=i(e),v=i(t),g=v.free,y=h.keyIndex,x=v.keyIndex,w=[],b=[],S=0,E=0,T=function(e,t){var n={index:e,item:t,type:o.REMOVE};w.push(n)},_=function(e,t){var n={index:e,item:t,type:o.INSERT};w.push(n)},M=function(e){l.splice(e,1)};S<e.length;)n=e[S],a=r.getItemSign(n),a?x.hasOwnProperty(a)?(s=x[a],b.push(t[s])):b.push(null):(c=g[E++],b.push(c||null)),S++;for(l=b.slice(0),S=0;S<l.length;)u=l[S],null===u?(T(S),M(S)):S++;for(p=S=0;S<t.length;)n=t[S],a=r.getItemSign(n),d=l[p],m=r.getItemSign(d),d?a===m?p++:y.hasOwnProperty(a)?(f=r.getItemSign(l[p+1]),f===a?(T(S,n),M(p),p++):_(S,n)):_(S,n):_(S,n),S++;return{moves:w,children:b}};n.makeKeyIndexAndFree=i,n.diff=a}),Simple.Module({name:"simple:core/template/virtual-dom/diff/main",require:["../utils/main","../patch/main","../diff/list","../../../../application/config"]},function(e,t,n,r){var o=e("../../../../application/config").comID,i=e("../utils/main"),a=e("../patch/main"),u=e("../diff/list").diff,s=function(e,t){var n=e.tagName||"",r=t.tagName||"";return n.replace(/:.*$/gi,"")===r.replace(/:.*$/gi,"")&&i.getItemSign(e)===i.getItemSign(t)},c=function(e){var t,n,r,o=e.attributes,i={},a=["complete","SimpleEvents"];for(n=0,r=o.length;n<r;n++)t=o[n].name,o[n].specified&&-1===a.indexOf(t)&&(i[o[n].name]=o[n].value);return e.style.cssText&&(i.style=e.style.cssText),e=null,i},l=function(e){var t,n,r=0,o=i.getChildren(e);for(t=0,n=o.length;t<n;t++)r++,r+=l(o[t]);return r},p=function(e,t,n,r,o){var s,c,p,f,m,h,v,g,y=u(e,t),x=0,w=null,b=n;for(t=y.children,y.moves.length&&(s={type:a.REORDER,moves:y.moves},o.push(s)),p=0,f=e.length;p<f;p++)c=e[p],m=t[p],w&&(x=l(w))?b+=x+1:b+=1,h=i.getKey(c),v=i.getKey(m),g=i.getSkip(m),void 0!==h&&void 0!==v&&h===v&&g?w=c:(d(c,m,b,r),w=c)},f=function(e,t){var n,r,o=c(e),i=c(t),a=0,u={};for(n in o)r=o[n],i[n]!==r&&(a++,u[n]=i[n]);for(n in i)r=i[n],o.hasOwnProperty(n)||(a++,u[n]=i[n]);return 0===a?null:u},d=function(e,t,n,r){var u,c,l,d,m,h,v,g=[];t&&(u=e.nodeType,c=t.nodeType,3===u&&3===c?(l=e.nodeValue||e.textContent,d=t.nodeValue||t.textContent,l!==d&&g.push({type:a.TEXT,content:d})):s(e,t)?(m=e.getAttribute(o)||1,h=t.getAttribute(o)||2,n&&m===h||(v=f(e,t),v&&g.push({type:a.PROPS,props:v}),p(i.getChildren(e),i.getChildren(t),n,r,g))):g.push({type:a.REPLACE,node:t})),e=null,t=null,g.length&&(r[n]=g)},m=function(e,t){var n={};return d(e,t,0,n),n};t.exports=m}),Simple.Module({name:"simple:core/template/virtual-dom/patch/main",require:["../utils/main","../../../../application/config"]},function(e,t,n,r){var o=e("../../../../application/config").comID,i=e("../utils/main"),a=function(e){var t,n,r,i,u=[],s=e.children;for(r=0,i=s.length;r<i;r++)t=s[r],n=t.getAttribute(o),n?u.push(n):u=u.concat(a(t));return u},u=function(e,t,n){var r;e&&1===e.nodeType&&(r=i.getItemSign(e),r?n.create.push(r):n.create=n.create.concat(a(e))),t&&1===t.nodeType&&(r=i.getItemSign(t),r?n.remove.push(r):n.remove=n.remove.concat(a(t)))},s=function(e,t,n){var r,o,a,s,c,l,p,f,d=i.getChildren(e),m={};for(s=0,c=d.length;s<c;s++)o=d[s],1===o.nodeType&&(l=i.getItemSign(o))&&(m[l]=o);for(s=0,c=t.length;s<c;s++)a=t[s],f=a.index,r=i.getChildren(e),"remove"===a.type?(d[f]===r[f]&&(u(null,r[f],n),e.removeChild(r[f])),d.splice(f,1)):"insert"===a.type&&(l=i.getItemSign(a.item),m[l]?p=m[l]:(p=a.item.cloneNode(!0),u(p,null,n)),d.splice(f,0,p),e.insertBefore(p,r[f]||null))},c=function(e,t){var n,r;for(r in t)void 0===t[r]?e.removeAttribute(r):(n=t[r],i.setAttr(e,r,n))},l=function(e,t,n){var r,o,i,a,l;for(a=0,l=t.length;a<l;a++)switch(r=t[a],r.type){case"replace":o=r.node,i=o.cloneNode(!0),e.parentNode.replaceChild(i,e),u(i,e,n),n.oldNode===e&&(n.newNode=i),i=null;break;case"reorder":s(e,r.moves,n);break;case"props":c(e,r.props);break;case"text":e.nodeValue?e.nodeValue=r.content:e.textContent=r.content;break;default:throw new Error("Unknown patch type "+r.type)}},p=function(e,t,n){var r,o,a=n[t.index],u=i.getChildren(e),s=u?u.length:0;for(o=0;o<s;o++)if(r=u[o],t.index++,r)switch(r.nodeType){case 8:break;default:p(r,t,n)}a&&l(e,a,t)},f=function(e,t){var n={index:0,newNode:null,oldNode:e,remove:[],create:[]};return p(e,n,t),n};f.REPLACE="replace",f.REORDER="reorder",f.PROPS="props",f.TEXT="text",f.REMOVE="remove",f.INSERT="insert",t.exports=f}),Simple.Module({name:"simple:core/template/virtual-dom/utils/main",require:["../../../../application/config"]},function(e,t,n,r){var o=e("../../../../application/config"),i=o.comID,a=o.listKey;t.exports={getChildren:function(e){var t,n,r=[],o=e.childNodes;for(t=0,n=o.length;t<n;t++)switch(o[t].nodeType){case 3:""!==(o[t].nodeValue||o[t].textContent).replace(/\s|\n/gi,"")&&r.push(o[t]);break;case 1:r.push(o[t])}return r},getItemSign:function(e){if(e&&1===e.nodeType)return e.getAttribute(a)||e.getAttribute(i)},getKey:function(e){if(e&&1===e.nodeType)return e.getAttribute(a)},getSkip:function(e){var t;if(e&&1===e.nodeType)return null!==(t=e.getAttribute("skip"))&&"true"===t},setAttr:function(e,t,n){var r;switch(t){case"style":e.style.cssText=n;break;case"class":e.className=n;break;case"value":r=e.tagName||"",r=r.toLowerCase(),"input"===r||"textarea"===r?e.value=n:e.setAttribute(t,n);break;default:e.setAttribute(t,n)}}}}),Simple.Module({name:"simple:tools/ajax/http/client/main",require:["../../../../core/utils/main","./options"]},function(e,t,n,r){var o=e("../../../../core/utils/main"),i=e("./options"),a={},u={};t.exports=function(e){var t,n,s,c=!1,l="",p="";return e||(e={}),t=e.xhr(e),t.open(e.method,e.url,e.async,e.username||null,e.password||null),i(e,t,a,u),t.upload&&t.upload.addEventListener?e.progress&&t.upload.addEventListener("progress",function(r){r.lengthComputable&&(n=r.loaded/r.total*100,e.progress.call(t,parseInt(n)))},!1):c=!0,s=function(){var n,i,f,d,m;if(c&&e.progress&&e.progress.call(t,parseInt(t.readyState/4*100)),s&&4===t.readyState){clearTimeout(t.timer),d={},s=void 0,t.onreadystatechange=o.noop,i=p||t.status||404,1223===i&&(i=204),d.text=t.responseText;try{f=l||t.statusText}catch(e){f=l}d.statusCode=i,d.statusText=f,d.http=t,d.responseURL=e.url,d.getResponseHeader=function(e){var t=this.responsesHeaders[e.toLowerCase()];return null===t?null:t},d.responsesHeaders=function(){for(var e,n=/^(.*?):[ \t]*([^\r\n]*)$/gm,r={},o=t.getAllResponseHeaders();e=n.exec(o);)r[e[1].toLowerCase()]=e[2];return r}(),m=i>=200&&i<300||304===i,!r.platform.node&&m&&e.ifModified&&(n=d.getResponseHeader("Last-Modified"),n&&(a[e.url]=n),(n=d.getResponseHeader("etag"))&&(u[e.url]=n)),e.callback(m,d),l="",p=""}},e.timeout>0&&(t.timer=setTimeout(function(){l="timeout",p="408",t.abort&&t.abort()},e.timeout)),t.onreadystatechange=s,t.send("POST"===e.method.toUpperCase()?e.paramString||null:null),t}}),Simple.Module({name:"simple:tools/ajax/http/client/options",require:["../../../../core/utils/main"]},function(e,t,n,r){var o=e("../../../../core/utils/main"),i=!(r.platform.ie&&r.platform.ie<10);t.exports=function(e,t,n,a){var u=e.headers;i&&e.xhrFields&&o.each(e.xhrFields,function(e,n){t[n]=e}),o.each(u,function(e,n){e&&t.setRequestHeader(n,e+"")}),e.contentType&&t.setRequestHeader("Content-Type",e.contentType),e.mimeType&&t.overrideMimeType&&t.overrideMimeType(e.mimeType),!r.platform.node&&e.ifModified&&t.setRequestHeader&&(n[e.url]&&t.setRequestHeader("If-Modified-Since",n[e.url]),a[e.url]&&t.setRequestHeader("If-None-Match",a[e.url]))}}),Simple.Module({name:"simple:tools/ajax/http/request/node-cache-request",require:["../client/main"]},function(e,t,n,r){var o=e("../client/main"),i=function(e){var t=this;t.options=e,t.readyState=0,t.isAbort=!1};i.prototype={getAllResponseHeaders:function(){return""},getResponseHeader:function(){return""},setRequestHeader:function(){},overrideMimeType:function(){},send:function(e){},open:function(e,t){this.url=t},abort:function(){this.isAbort=!0},isNodeCache:!0},i.prototype.constructor=i,t.exports=function(e){var t,n,a=r.Cache.Manager;return a&&"GET"===e.method?(t=new i(e),a.get(e,function(t){t?e.callback(!0,{statusCode:200,statusText:"OK",text:t}):(n=e.callback,e.callback=function(t,r){t&&a.set(e,r.text),n(t,r)},e.xhr=r.Server.Tools.http,o(e))}),t):new r.Server.Tools.http(e)}}),Simple.Module({name:"simple:tools/ajax/http/request/script-jsonp-request"},function(e,t,n,r){var o=function(e){var t=this;t.options=e,t.readyState=0,t.isAbort=!1};o.prototype={getAllResponseHeaders:function(){return""},getResponseHeader:function(){return""},setRequestHeader:function(){},overrideMimeType:function(){},send:function(e){var t,n=this,r=n.options,o=r.callbackName||"SimpleAjaxJsonp_"+Math.random().toString(16).substring(2),i=e?n.url+(n.url.indexOf("?")>-1?"&":"?")+e:this.url,a=n.script=document.createElement("script");a.src=i+(n.url.indexOf("?")>-1?"&":"?")+"callback="+o,r.charset&&(a.charset=r.charset),t=function(e,r,o,i){t=null,n.status=o,n.statusText=r,e&&(n.response=i,n.responseText=i)},window[o]=function(e){n.isAbort?(n.isAbort=!1,t(!1,"abort",404)):(n.readyState=4,a.setAttribute("spl-jsonp-status","success"),t(!0,"OK",200,e))},a.onload=a.onreadystatechange=function(e){a.readyState&&!/loaded|complete/.test(a.readyState)||(a.onreadystatechange=a.load=null,"success"!==a.getAttribute("spl-jsonp-status")&&t(!1,"error",404),window[o]=null,a.parentNode&&a.parentNode.removeChild(a),a=null,n.onreadystatechange&&n.onreadystatechange(e))},document.head.appendChild(a)},open:function(e,t){this.url=t},abort:function(){var e=this;e.isAbort=!0,e.script.parentNode&&e.script.parentNode.removeChild(e.script)}},o.prototype.constructor=o,t.exports=function(e){return new o(e)}}),Simple.Module({name:"simple:tools/ajax/http/request/x-domain-request"},function(e,t,n,r){var o=function(e){var t=this;t.options=e,t.readyState=0,t.isAbort=!1};o.prototype={getAllResponseHeaders:function(){return"context-type: "+this.http.contentType},getResponseHeader:function(){return""},setRequestHeader:function(){},overrideMimeType:function(){},send:function(e){var t=this,n=t.options,r=t.http=new XDomainRequest,o=function(e,n,o){t.isAbort?(t.status=404,t.statusText="timeout"):(t.status=e||200,t.statusText=n||"OK"),t.response=o||r.responseText,t.responseText=o||r.responseText,t.isAbort=!1,t.readyState=4,t.onreadystatechange&&t.onreadystatechange()};r.open(t.method,t.url),r.timeout=n.timeout,r.onload=function(){o("200","OK",r.responseText)},r.onerror=function(){o("500","error","")},r.send(e||null)},open:function(e,t){this.method=e,this.url=t},abort:function(){var e=this;e.isAbort=!0,e.http&&e.http.abort()}},o.prototype.constructor=o,t.exports=function(e){return new o(e)}}),Simple.Module({name:"simple:tools/ajax/http/request/xml-http-request"},function(e,t,n,r){t.exports=function(){var e;try{if(window.XMLHttpRequest)e=new XMLHttpRequest;else if(self.ActiveXObject)try{e=new self.ActiveXObject("Microsoft.XMLHTTP")}catch(t){try{e=new self.ActiveXObject("MSXML2.XMLHTTP")}catch(e){}}}catch(e){throw new TypeError("CreateXmlHttpRequest error "+e.message)}return e}}),Simple.Module({name:"simple:tools/ajax/methods/request/options"},function(e,t,n,r){var o={"X-Data-Type":"json","X-Requested-With":"XMLHttpRequest"};t.exports={canonical:!0,rewriter:!1,dataType:"JSON",jsonp:!1,crossDomain:!0,callbackName:null,token:!1,charset:"UTF-8",url:"./",context:null,method:"GET",processData:!0,async:!0,timeout:5e3,mimeType:"text/xml",headers:o,params:{},cache:!1,traditional:!0,ifModified:!1,xhrFields:{withCredentials:!0},contentType:"application/x-www-form-urlencoded; charset=UTF-8"}}),Simple.Module({name:"simple:tools/ajax/methods/request/response",require:["simple:tools/logger/main"]},function(require,module,exports,Simple){var Logger=require("simple:tools/logger/main"),DataParse=function(options,response){var data=response.text,dataType=options.dataType,dataParse=options.dataParse;return dataParse&&dataParse[dataType]?dataParse[dataType](options,data):"JSON"===dataType&&"string"==typeof data?eval("("+data.trim()+")"):data},ErrorHandle=function(e,t,n){t.error&&!1===t.error(e,t,n)||(Logger.error(n.responseURL+" "+n.statusCode+" "+(n.errorStack||n.statusText),t.context),e.reject(n.statusCode,n,t.context))},DataFilter=function(e,t){var n=e.dataFilter;return n?n(e.dataType,e,t):t},ContextHandle=function(e,t,n){e&&e.store&&e.store(t.clientUrl,n.text)},SuccessHandle=function(e,t,n){var r,o;try{r=DataParse(t,n)}catch(r){return n.statusCode=500,n.statusText=r.message,n.errorStack=r.stack,void ErrorHandle(e,t,n)}if(!n.isNodeData)try{o=DataFilter(t,r),void 0!==o&&(r=o)}catch(r){return n.statusCode=500,n.statusText=r.message,n.errorStack=r.stack,void ErrorHandle(e,t,n)}n.data=r,n.text=JSON.stringify(r),t.success&&!1===t.success(e,t,n)||(t.canonical&&"JSON"===t.dataType?!0===r.success?(ContextHandle(t.context,t,n),e.resolve(r.data,n,t.context)):(Logger.error(n.responseURL+" "+n.text,t.context),n.statusCode=r.errorCode,n.statusText=r.message,e.reject(n.statusCode,n,t.context)):(ContextHandle(t.context,t,n),e.resolve(r,n,t.context)))};module.exports=function(e,t,n,r){r.endTime=new Date,r.time=r.endTime-r.beginTime,r.context=t.context,Logger.request(r),n?SuccessHandle(e,t,r):ErrorHandle(e,t,r)}}),Simple.Module({name:"simple:tools/ajax/methods/request/url",require:["../../../../core/utils/main","../../../../store/main"]},function(e,t,n,r){var o=e("../../../../core/utils/main"),i=e("../../../../store/main"),a=function(e){var t,n,r=e.url,o=e.params;if(e.rewriter)for(n in o)t=new RegExp("\\$\\{"+n+"\\}","ig"),t.test(r)&&(e.url=e.url.replace(t,o[n]),delete o[n])},u=function(e){var t=i.getHosts()||{},n=t.client||{},r=t.server||{};return e.indexOf("://")>-1?{clientUrl:e.replace(/(^\w+):\/\//gi,function(e,t){return n[t]||e}),serverUrl:e.replace(/(^\w+):\/\//gi,function(e,t){return r[t]||e})}:{clientUrl:e,serverUrl:e}},s=function(e,t){var n,r=e.indexOf("?"),i=e.substring(r+1),a=o.split(i,"&","=",!0);return r>-1?(n=o.object(o.sortBy(o.pairs(a))),e.replace(/\?.*$/gi,"?"+o.param(n,t))):e};t.exports=function(e){var t;e.simpleUrl=e.url,t=u(e.url),e.url=e.url.replace(/#.*$/gi,""),a(e),r.platform.node?e.url=t.serverUrl:e.url=t.clientUrl,"string"!=typeof e.params&&e.processData?e.paramString=o.param(e.params,e.traditional):e.paramString=e.params,"GET"===e.method&&e.paramString&&e.processData&&(e.url+=(e.url.indexOf("?")>-1?"&":"?")+e.paramString),e.url=s(e.url,e.traditional),e.url.indexOf("?")>-1?e.clientUrl=t.clientUrl.replace(/\?.*/gi,"")+"?"+e.url.replace(/^.*\?/gi,""):e.clientUrl=t.clientUrl,e.originalUrl=e.url}});// Simple.Application